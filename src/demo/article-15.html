<!DOCTYPE html>
<html>
<head>
  
  <title>&#x5F53;&#x524D;&#x7AEF;&#x4E5F;&#x62E5;&#x6709; Server &#x7684;&#x80FD;&#x529B;</title>
  
</head>
<body>

<div id="wrap">
  <h1>&#x5F53;&#x524D;&#x7AEF;&#x4E5F;&#x62E5;&#x6709; Server &#x7684;&#x80FD;&#x529B;</h1>
  <div id="content"><p>&#x4ECA;&#x5929;&#x770B;&#x4E86;&#x4E0D;&#x5C11;&#x6587;&#x7AE0;&#xFF0C;&#x6BD4;&#x8F83;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x662F; Cache API&#x3002;&#x5B83;&#x662F;&#x6D4F;&#x89C8;&#x5668; Request/Response &#x7684;&#x7F13;&#x5B58;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x5176;&#x4F7F;&#x7528;&#x98CE;&#x683C;&#x548C;&#x8FD0;&#x7528;&#x573A;&#x666F;&#x8BA9;&#x6211;&#x77AC;&#x95F4;&#x8054;&#x60F3;&#x5230;&#x4E86; ServiceWorker &#x548C; Fetch API&#xFF0C;&#x76F8;&#x4FE1;&#x5F88;&#x591A;&#x540C;&#x5B66;&#x4E5F;&#x591A;&#x6B21;&#x770B;&#x5230;&#x8FC7;&#x8FD9;&#x4E24;&#x4E2A;&#x4E1C;&#x897F;&#xFF0C;&#x672C;&#x6587;&#x4F1A;&#x5BF9;&#x5B83;&#x4EEC;&#x505A;&#x4E00;&#x4E2A;&#x7B80;&#x6D01;&#x7684;&#x4ECB;&#x7ECD;&#xFF0C;&#x5E76;&#x8C08;&#x4E00;&#x8C08;&#x6211;&#x5BF9;&#x8FD9;&#x4E9B;&#x65B0;&#x73A9;&#x5177;&#x7684;&#x770B;&#x6CD5;&#x3002;</p>
<a id="more"/>
<h3 id="Fetch_API">Fetch API</h3><p>&#x4F20;&#x7EDF;&#x7684; XMLHttpRequest&#xFF0C;&#x51FA;&#x4E86;&#x4E24;&#x4E2A;&#x7248;&#x672C;&#xFF0C;&#x5728; XHR2.0 &#x4E2D;&#x5F15;&#x5165;&#x4E86;&#x8DE8;&#x6E90;&#x8BF7;&#x6C42;&#x3001;&#x4E0A;&#x4F20;&#x8FDB;&#x5EA6;&#x4E8B;&#x4EF6;&#x548C;&#x5BF9;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x7684;&#x652F;&#x6301;&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B; API &#x7684;&#x589E;&#x5F3A;&#x8BA9; AJAX &#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x5730;&#x4E0E; HTML5 API &#x76F8;&#x7ED3;&#x5408;&#xFF0C;&#x4F8B;&#x5982; File System API&#x3001;Web Audio API&#x3001;WebGL &#x7B49;&#xFF0C;&#x8BA9;&#x524D;&#x7AEF;&#x5BF9;&#x97F3;&#x89C6;&#x9891;&#x7684;&#x5904;&#x7406;&#x548C;&#x5BCC;&#x5BA2;&#x6237;&#x7AEF;&#x5143;&#x7D20;&#x7684;&#x5904;&#x7406;&#x66F4;&#x52A0;&#x6709;&#x4EB2;&#x548C;&#x529B;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x4E0E;&#x540E;&#x7AEF;&#x4EA4;&#x4E92;&#x7684;&#x901A;&#x9053;&#xFF0C;XHR2.0 &#x7684;&#x63A5;&#x53E3;&#x5C01;&#x88C5;&#x4F9D;&#x7136;&#x8FC7;&#x4E8E;&#x5E95;&#x5C42;&#x3002;&#x770B;&#x770B; jQuery &#x5BF9; AJAX &#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x518D;&#x56DE;&#x5934;&#x770B;&#x770B;&#x6211;&#x4EEC;&#x4ECA;&#x5929;&#x8981;&#x4ECB;&#x7ECD;&#x7684; Fetch API&#xFF0C;&#x4E0D;&#x5F97;&#x4E0D;&#x60CA;&#x53F9;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5DF2;&#x7ECF;&#x5728;&#x5E94;&#x7528;&#x5C42;&#x9762;&#x601D;&#x8003;&#x7740;&#x529F;&#x80FD;&#x7684;&#x62D3;&#x5C55;&#xFF0C;&#x4F9D;&#x6258;&#x7740; Promise &#x4EA7;&#x51FA;&#x4E86;&#x5341;&#x5206;&#x53CB;&#x597D;&#x7684;&#x65B0;&#x4E00;&#x5957;&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x4EE5;&#x524D;&#x6211;&#x4EEC;&#x4F7F;&#x7528; XHR &#x53BB;&#x8BF7;&#x6C42;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#xFF0C;&#x4F1A;&#x8FD9;&#x4E48;&#x505A;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment">// Just getting XHR is a mess!</span></span></div><div><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) {</span></div><div><span class="line">  request = <span class="keyword">new</span> XMLHttpRequest();</span></div><div><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.ActiveXObject) {</span></div><div><span class="line">  <span class="keyword">try</span> {</span></div><div><span class="line">    request = <span class="keyword">new</span> ActiveXObject(<span class="string">&apos;Msxml2.XMLHTTP&apos;</span>);</span></div><div><span class="line">  } </span></div><div><span class="line">  <span class="keyword">catch</span> (e) {</span></div><div><span class="line">    <span class="keyword">try</span> {</span></div><div><span class="line">      request = <span class="keyword">new</span> ActiveXObject(<span class="string">&apos;Microsoft.XMLHTTP&apos;</span>);</span></div><div><span class="line">    } </span></div><div><span class="line">    <span class="keyword">catch</span> (e) {}</span></div><div><span class="line">  }</span></div><div><span class="line">}</span></div><div><span class="line">request.onreadstatechange = <span class="function"><span class="keyword">function</span>(<span class="params"/>)</span>{</span></div><div><span class="line">  <span class="comment">// handle data;</span></span></div><div><span class="line">};</span></div><div><span class="line">request.open(<span class="string">&apos;GET&apos;</span>, <span class="string">&apos;http://barretlee.com/test.json&apos;</span>, <span class="literal">true</span>);</span></div><div><span class="line">request.send(<span class="literal">null</span>);</span></div></pre></td></tr></table>
<p>&#x800C;&#x4F7F;&#x7528; Fetch API&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">fetch(<span class="string">&apos;http://barretlee.com/test.json&apos;</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>{ </span></div><div><span class="line">  <span class="comment">// Convert to JSON</span></span></div><div><span class="line">  <span class="keyword">return</span> response.json();</span></div><div><span class="line">}).then(<span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>{</span></div><div><span class="line">  <span class="built_in">console</span>.log(val); </span></div><div><span class="line">});</span></div></pre></td></tr></table>
<p>&#x5BF9;&#x4E8E; Text/HTML &#x548C; Blob &#x7B49;&#x683C;&#x5F0F;&#x7684;&#x8BF7;&#x6C42;&#x548C;&#x8F6C;&#x5316;&#x4E5F;&#x662F;&#x5F02;&#x5E38;&#x65B9;&#x4FBF;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment">// Text/HTML &#x8BF7;&#x6C42;</span></span></div><div><span class="line">fetch(<span class="string">&apos;/next/page&apos;</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>{</span></div><div><span class="line">    <span class="keyword">return</span> response.text();</span></div><div><span class="line">}).then(<span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>{</span></div><div><span class="line">  <span class="built_in">console</span>.log(text); </span></div><div><span class="line">});</span></div><div><span class="line"/></div><div><span class="line"><span class="comment">// Blob &#x6D41;</span></span></div><div><span class="line">fetch(<span class="string">&apos;flowers.jpg&apos;</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>{</span></div><div><span class="line">  <span class="keyword">return</span> response.blob();</span></div><div><span class="line">}).then(<span class="function"><span class="keyword">function</span>(<span class="params">blob</span>) </span>{</span></div><div><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">&apos;img&apos;</span>).src = URL.createObjectURL(blob);</span></div><div><span class="line">});</span></div></pre></td></tr></table>
<p>Fetch API &#x8BA9;&#x6211;&#x4EEC;&#x66F4;&#x52A0;&#x5173;&#x6CE8;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x805A;&#x7126;&#x5728;&#x5982;&#x4F55;&#x8BF7;&#x6C42;&#x548C;&#x5982;&#x4F55;&#x5904;&#x7406;&#x54CD;&#x5E94;&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#x4E0A;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5B83;&#x4E5F;&#x5B58;&#x5728;&#x51E0;&#x4E2A;&#x76F8;&#x6BD4; XHR &#x4E0D;&#x8DB3;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x9996;&#x5148;&#x5B83;&#x4E0D;&#x80FD; abort &#x8BF7;&#x6C42;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x4E0D;&#x80FD;&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684; progress &#x72B6;&#x6001;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x6CA1;&#x6709; timeout &#x8D85;&#x65F6;&#x5904;&#x7406;&#x3002;Fetch API &#x662F;&#x57FA;&#x4E8E; Promise &#x7684;&#xFF0C;&#x800C; Promise &#x7684;&#x72B6;&#x6001;&#x53EA;&#x6709; pending&#x3001;resolve&#x3001;reject&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x8BF8;&#x5982; pending(80%) &#x7684;&#x72B6;&#x6001;&#x63D0;&#x793A;&#xFF1B;&#x6211;&#x4EEC;&#x4E5F;&#x65E0;&#x6CD5;&#x5BF9;&#x4E00;&#x4E2A; Promise chains &#x505A; abort &#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x80FD;&#x591F;&#x7406;&#x89E3;&#x5E76;&#x4E14;&#x63A5;&#x53D7;&#x7684;&#x3002;</p>
<p>&#x6211;&#x4E5F;&#x76F8;&#x4FE1;&#xFF0C;Fetch API &#x6709;&#x80FD;&#x529B;&#x63D0;&#x4F9B;&#x8FD9;&#x4E9B;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x548C;&#x9644;&#x52A0;&#x7684; API&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x4E0D;&#x6210;&#x719F;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x5B83;&#x76EE;&#x524D;&#x4E0D;&#x9700;&#x8981;&#x8FC8;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x6B65;&#x5B50;&#x3002;</p>
<h3 id="ServiceWorker">ServiceWorker</h3><p>ServiceWorker&#xFF0C;&#x7B80;&#x5355;&#x800C;&#x8A00;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x653E;&#x5728;&#x524D;&#x7AEF;&#x7684; HTTP &#x62E6;&#x622A;&#x5668;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x8981;&#x8BF7;&#x6C42;&#x4E00;&#x4E2A;&#x4E0D;&#x5B58;&#x5728;&#x7684; URI &#x5982;&#xFF1A;<code>/test/a.html</code>&#xFF0C;&#x76F4;&#x63A5;&#x8BF7;&#x6C42;&#x5C31;&#x4F1A;&#x54CD;&#x5E94; 404&#xFF0C;&#x800C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9884;&#x5148;&#x5728; ServiceWorker &#x4E2D;&#x6CE8;&#x518C;&#x4E86;&#x8FD9;&#x4E2A;&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x4E14;&#x6307;&#x5B9A;&#x54CD;&#x5E94;&#x5185;&#x5BB9;&#xFF0C;&#x5F53;&#x518D;&#x6B21;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x770B;&#x5230;&#x7ED3;&#x679C;&#x662F;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment">&lt;!-- demo.html --&gt;</span></span></div><div><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"/><div><span class="line">navigator.serviceWorker.register(<span class="string">&quot;worker.js&quot;</span>, {</span></div><div><span class="line">  scope: <span class="string">&quot;/test/a.html&quot;</span></span></div><div><span class="line">}).then(<span class="function"><span class="keyword">function</span>(<span class="params"/>)</span>{</span></div><div><span class="line">  fetch(&#x2018;/test/a.html&#x2019;).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>{</span></div><div><span class="line">    <span class="keyword">return</span> response.text();</span></div><div><span class="line">  }).then(<span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>{</span></div><div><span class="line">    <span class="built_in">console</span>.log(text); </span></div><div><span class="line">  });</span></div><div><span class="line">});</span></div><div><span class="line"/></div><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span></div></pre></td></tr></table>
<p>&#x5728; demo.html &#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;&#xFF0C;&#x5C06; <code>/test/a.html</code> &#x7684;&#x8BF7;&#x6C42;&#x4EA4;&#x7ED9; <code>worker.js</code> &#x6765;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x4E3A;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment">// workker.js</span></span></div><div><span class="line">addEventListener(<span class="string">&quot;fetch&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>{</span></div><div><span class="line">  evt.respondWith(<span class="keyword">new</span> Response(&#x201C;Hi, Barret Lee&#x201D;));</span></div><div><span class="line">});</span></div></pre></td></tr></table>
<p>&#x5728; <code>demo.html</code> &#x7684;&#x56DE;&#x8C03;&#x4E2D;&#x4F7F;&#x7528; Fetch  &#x83B7;&#x53D6;<code>/test/a.html</code> &#x8FD9;&#x4E2A;&#x5E76;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x88AB; ServiceWorker &#x6355;&#x83B7;&#xFF0C;&#x4EA4;&#x7ED9; <code>worker.js</code> &#x5904;&#x7406;&#x5E76;&#x54CD;&#x5E94; <code>Hi, Barret Lee</code> &#x7684;&#x6587;&#x672C;&#xFF0C;&#x6574;&#x4E2A;&#x8BBE;&#x8BA1;&#x601D;&#x8DEF;&#x5341;&#x5206;&#x6E05;&#x6670;&#xFF0C;&#x5F88;&#x8F7B;&#x677E;&#x5730;&#x62E6;&#x622A;&#x4E86;&#x6765;&#x81EA;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x4F5C;&#x51FA;&#x4E86;&#x54CD;&#x5E94;&#x3002;</p>
<p>&#x7531;&#x4E8E; ServiceWorker &#x662F;&#x5BF9; Promise &#x53CB;&#x597D;&#x7684;&#xFF0C;&#x54CD;&#x5E94;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x6A21;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x4F11;&#x7720;&#x72B6;&#x6001;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">addEventListener(<span class="string">&quot;fetch&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>{</span></div><div><span class="line">  evt.respondWith(<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>{</span></div><div><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"/>)</span>{</span></div><div><span class="line">      resolve(<span class="keyword">new</span> Response(&#x201C;Hi, Barret Lee&#x201D;));</span></div><div><span class="line">    }, <span class="number">1000</span>);</span></div><div><span class="line">  }));</span></div><div><span class="line">});</span></div></pre></td></tr></table>
<p>&#x7531;&#x4E8E; Fetch API &#x63D0;&#x4F9B;&#x4E86;&#x5BF9; Header &#x5934;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x6211;&#x4EEC;&#x51E0;&#x4E4E;&#x53EF;&#x4EE5;&#x5229;&#x7528; ServiceWorker &#x5B9E;&#x73B0;&#x771F;&#x5B9E; HTTP Server &#x7684;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x3002;</p>
<p>ServiceWorker &#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x6539;&#x53D8;&#x4E86; Web &#x534F;&#x4F5C;&#x7684;&#x4EA4;&#x4E92;&#x6A21;&#x5F0F;&#xFF0C;&#x4F20;&#x7EDF;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5F00;&#x542F;&#x4E00;&#x4E2A; Web Server&#xFF0C;&#x6216;&#x8005;&#x8BA9;&#x5176;&#x4ED6;&#x4EBA;&#x63D0;&#x4F9B; HTTP Server&#xFF0C;&#x524D;&#x540E;&#x7AEF;&#x4E4B;&#x95F4;&#x4EA4;&#x4E92;&#xFF0C;&#x6C9F;&#x901A;&#x6210;&#x672C;&#x6BD4;&#x8F83;&#x9AD8;&#x3002;&#x800C; ServiceWorker &#x628A; HTTP Server &#x642C;&#x5230;&#x4E86;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E0A;&#x8F7B;&#x677E; Hold &#x4F4F;&#x4E24;&#x7AEF;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x4E5F;&#x7B97;&#x662F; Web &#x6280;&#x672F;&#x6808;&#x878D;&#x5408;&#x7684;&#x8868;&#x73B0;&#x5427;&#x3002;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x5149;&#x653E;&#x5728; HTTP &#x7684;&#x4EA4;&#x4E92;&#x4E0A;&#xFF0C;ServiceWorker &#x4F1A;&#x6709;&#x65E0;&#x9650;&#x7684;&#x60F3;&#x8C61;&#x7A7A;&#x95F4;&#xFF0C;&#x6BD4;&#x5982;&#x5BF9; History API &#x7684;&#x5EF6;&#x4F38;&#x601D;&#x8003;&#xFF0C;&#x8DE8;&#x9875;&#x9762;&#x5171;&#x4EAB;&#x95EE;&#x9898;&#xFF0C;&#x524D;&#x7AEF;&#x8BF7;&#x6C42;&#x5408;&#x5E76;&#x548C;&#x5206;&#x62C6;&#x95EE;&#x9898;&#xFF0C;mock &#x6570;&#x636E;&#x95EE;&#x9898;&#xFF0C;&#x524D;&#x540E;&#x7AEF;&#x7684;&#x8054;&#x8C03;&#x95EE;&#x9898;&#xFF0C;&#x7C7B; graphQL &#x95EE;&#x9898;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x7F13;&#x5B58;&#x66F4;&#x65B0;&#x548C;&#x590D;&#x7528;&#x95EE;&#x9898;&#x7B49;&#x7B49;&#x3002;</p>
<h3 id="Cache_API">Cache API</h3><p>Cache API&#xFF0C;&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#x5C31;&#x662F;&#x4E00;&#x4E2A; Request/Response &#x7684;&#x7F13;&#x5B58;&#x5BF9;&#x8C61;&#x7EC4;&#xFF0C;&#x5B83;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x8DDF; ServiceWorker &#x662F;&#x7D27;&#x5BC6;&#x76F8;&#x8FDE;&#x7684;&#xFF0C;&#x5B83;&#x6CA1;&#x6709;&#x5931;&#x6548;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x5220;&#x9664;&#x5C31;&#x4F1A;&#x4E00;&#x76F4;&#x4FDD;&#x6301;&#x539F;&#x6837;&#x3002;</p>
<table><tr><td class="code"><pre><div><span class="line">caches.open(<span class="string">&apos;test-cache&apos;</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">cache</span>) </span>{</span></div><div><span class="line">  cache.add(<span class="string">&apos;/index.html&apos;</span>);</span></div><div><span class="line">});</span></div></pre></td></tr></table>
<p>&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5C31;&#x5C06; <code>/index.html</code> &#x8FD9;&#x4E2A;&#x9875;&#x9762;&#x7F13;&#x5B58;&#x4E86;&#x4E0B;&#x6765;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x6700;&#x65B0;&#x7248;&#x7684; Chrome&#xFF0C;&#x53EF;&#x4EE5;&#x6253;&#x5F00; DevTools &gt; Resources &gt; Cache Storage&#xFF0C;&#x591A;&#x4E86;&#x4E00;&#x4E2A; <code>test-cache</code> &#x7684;&#x7F13;&#x5B58;&#x8868;&#xFF0C;&#x8868;&#x4E2D;&#x591A;&#x51FA;&#x4E00;&#x9879;&#xFF0C;Request &#x4E3A; <code>http://barretlee.com/index.html</code>, Response &#x4E3A; <code>OK</code>&#x3002;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x7F13;&#x5B58;&#x5185;&#x5BB9;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">caches.open(<span class="string">&apos;test-cache&apos;</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">cache</span>) </span>{ </span></div><div><span class="line">  cache.keys().then(<span class="function"><span class="keyword">function</span>(<span class="params">cachedRequests</span>) </span>{ </span></div><div><span class="line">    <span class="built_in">console</span>.log(cachedRequests);</span></div><div><span class="line">  });</span></div><div><span class="line">});</span></div></pre></td></tr></table>
<p>&#x5F53;&#x6D4F;&#x89C8;&#x5668;&#x5904;&#x4E8E; idle&#xFF08;&#x7A7A;&#x95F2;&#xFF09; &#x72B6;&#x6001;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5C06; Cache &#x8D44;&#x6E90;&#x9884;&#x52A0;&#x8F7D;&#x5230;&#x672C;&#x5730;&#x3002;&#x8FD9;&#x4E5F;&#x8BA9;&#x6211;&#x60F3;&#x8D77;&#x4E86; link &#x6807;&#x7B7E;&#x4E2D;&#x6709;&#x4E00;&#x4E2A; prefetch &#x529F;&#x80FD;&#xFF0C;&#x4E5F;&#x4F1A;&#x6709;&#x540C;&#x5B66;&#x60F3;&#x5230; Manifest&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E24;&#x4E2A;&#x4E1C;&#x897F;&#x90FD;&#x662F;&#x4E0D;&#x80FD;&#x53CB;&#x597D;&#x63A7;&#x5236;&#x7684;&#xFF0C;&#x800C; Cache &#x7ED9;&#x6211;&#x4EEC;&#x5E26;&#x6765;&#x4E86;&#x8FD9;&#x6837;&#x7684;&#x4FBF;&#x5229;&#x3002;</p>
<h3 id="&#x5C0F;&#x7ED3;">&#x5C0F;&#x7ED3;</h3><p>&#x6211;&#x4E00;&#x76F4;&#x76F8;&#x5F53;&#x770B;&#x597D; Fetch API &#x7CFB;&#x5217;&#x76F8;&#x5173;&#x7684;&#x65B0;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x7684;&#x7279;&#x70B9;&#x4E5F;&#x5F88;&#x6E05;&#x6670;&#xFF0C;&#x9996;&#x5148;&#x662F;&#x57FA;&#x4E8E; Promise &#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B9E;&#x73B0;&#x89E3;&#x51B3;&#x4E86;&#x56DE;&#x8C03;&#x548C;&#x72B6;&#x6001;&#x63A7;&#x5236;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x7136;&#x540E;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x5E94;&#x7528;&#x7EA7;&#x522B;&#x7684;&#x63A5;&#x53E3;&#x8BBF;&#x95EE;&#xFF0C;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x628A;&#x4E00;&#x4E2A; HTTP &#x8BF7;&#x6C42;&#x4F5C;&#x4E3A;&#x53EF;&#x63A7;&#x7684;&#x5BF9;&#x8C61;&#x968F;&#x610F;&#x64CD;&#x4F5C;&#xFF0C;&#x65E0;&#x8BBA;&#x662F; Request &#x8FD8;&#x662F; Response &#x90FD;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x638C;&#x63E1;&#x4E4B;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x89E3;&#x51B3;&#x4E86;&#x8DE8;&#x9875;&#x9762;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#x7684;&#x95EE;&#x9898;&#xFF08;&#x81F3;&#x4E8E;&#x8DE8;&#x9875;&#x9762;&#x901A;&#x8BAF;&#xFF0C;&#x6211;&#x4EEC;&#x6709; postMessage &#x548C; MessageChannel &#x7B49;&#x5DE5;&#x5177;&#xFF09;&#x3002;</p>
<p>&#x76EE;&#x524D;&#x6D4F;&#x89C8;&#x5668;&#x5BF9; Fetch API &#x548C; ServiceWorker &#x7684;&#x652F;&#x6301;&#x90FD;&#x662F;&#x6BD4;&#x8F83;&#x53EF;&#x89C2;&#x7684;&#xFF0C;&#x867D;&#x7136; W3C &#x4E0A;&#x7684;&#x6587;&#x6863;&#x72B6;&#x6001;&#x8FD8;&#x662F; Draft &#x6A21;&#x5F0F;&#xFF0C;&#x76F8;&#x4FE1;&#x968F;&#x7740;&#x6211;&#x4EEC;&#x5BF9;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x7684;&#x66F4;&#x52A0;&#x660E;&#x786E;&#xFF0C;&#x5BF9;&#x524D;&#x7AEF;&#x8BA4;&#x77E5;&#x7684;&#x7684;&#x4E0D;&#x65AD;&#x6DF1;&#x5165;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x5C06;&#x5F88;&#x5FEB;&#x88AB;&#x5B9A;&#x4E3A; RFC&#x3002;</p>
<p>&#x672C;&#x6587;&#x6CA1;&#x6709;&#x5BF9; API &#x7684;&#x4F7F;&#x7528;&#x505A;&#x6DF1;&#x5165;&#x7684;&#x8BF4;&#x660E;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x662F;&#x56E0;&#x4E3A;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x80FD;&#x5728; Google &#x4E0A;&#x627E;&#x5230;&#xFF0C;&#x5176;&#x6B21;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x6709;&#x4E9B; API &#x7684;&#x8BBE;&#x8BA1;&#x4E0A;&#x8FD8;&#x4E0D;&#x591F;&#x6210;&#x719F;&#xFF0C;&#x4ECA;&#x540E;&#x4F1A;&#x6709;&#x589E;&#x5220;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x53BB; W3C &#x63D0;&#x4F9B;&#x7684;&#x6587;&#x6863;&#x4E2D;&#x6DF1;&#x5165;&#x5B66;&#x4E60;&#x4E0B;&#x3002;</p>
<h3 id="&#x62D3;&#x5C55;&#x9605;&#x8BFB;">&#x62D3;&#x5C55;&#x9605;&#x8BFB;</h3><ul>
<li><a href="http://www.html5rocks.com/zh/tutorials/file/xhr2/" target="_blank" rel="external">http://www.html5rocks.com/zh/tutorials/file/xhr2/</a></li>
<li><a href="https://www.web-tinker.com/article/20882.html" target="_blank" rel="external">https://www.web-tinker.com/article/20882.html</a></li>
<li><a href="https://davidwalsh.name/fetch" target="_blank" rel="external">https://davidwalsh.name/fetch</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Cache" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/API/Cache</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API</a></li>
</ul></div>
</div>

</body>
</html>