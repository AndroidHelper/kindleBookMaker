<!DOCTYPE html>
<html>
<head>
  
  <title>&#x7EC6;&#x8BF4; CA &#x548C;&#x8BC1;&#x4E66;</title>
  
</head>
<body>

<div id="wrap">
  <h1>&#x7EC6;&#x8BF4; CA &#x548C;&#x8BC1;&#x4E66;</h1>
  <div id="content"><p>CA&#xFF0C;Catificate Authority&#xFF0C;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x63D0;&#x4F9B;&#x8BC1;&#x4E66;&#xFF08;&#x5373;&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;&#xFF0C;&#x7531;&#x57DF;&#x540D;&#x3001;&#x516C;&#x53F8;&#x4FE1;&#x606F;&#x3001;&#x5E8F;&#x5217;&#x53F7;&#x548C;&#x7B7E;&#x540D;&#x4FE1;&#x606F;&#x7EC4;&#x6210;&#xFF09;&#x52A0;&#x5F3A;&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x4E4B;&#x95F4;&#x4FE1;&#x606F;&#x4EA4;&#x4E92;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x4EE5;&#x53CA;&#x8BC1;&#x4E66;&#x8FD0;&#x7EF4;&#x76F8;&#x5173;&#x670D;&#x52A1;&#x3002;&#x4EFB;&#x4F55;&#x4E2A;&#x4F53;/&#x7EC4;&#x7EC7;&#x90FD;&#x53EF;&#x4EE5;&#x626E;&#x6F14; CA &#x7684;&#x89D2;&#x8272;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x96BE;&#x4EE5;&#x5F97;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x4FE1;&#x4EFB;&#xFF0C;&#x80FD;&#x591F;&#x53D7;&#x6D4F;&#x89C8;&#x5668;&#x9ED8;&#x8BA4;&#x4FE1;&#x4EFB;&#x7684; CA &#x5927;&#x5382;&#x5546;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x5176;&#x4E2D; TOP5 &#x662F; Symantec&#x3001;Comodo&#x3001;Godaddy&#x3001;GolbalSign &#x548C; Digicert&#x3002;</p>
<a id="more"/>
<h3 id="&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;&#x5206;&#x7C7B;">&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;&#x5206;&#x7C7B;</h3><p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E24;&#x4E2A;&#x7EF4;&#x5EA6;&#x6765;&#x5206;&#x7C7B;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x5546;&#x4E1A;&#x89D2;&#x5EA6;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x4E1A;&#x52A1;&#x89D2;&#x5EA6;&#x3002;</p>
<p><style>.cert-eg th,.cert-eg td {text-align:center;}.cert-eg .align-left{text-align:left;}.cert-eg br{display: block;}</style></p>
<table class="cert-eg">  <tr>    <th/>    <th>&#x5355;&#x57DF;&#x540D;</th>    <th>&#x591A;&#x57DF;&#x540D;</th>    <th>&#x6CDB;&#x57DF;&#x540D;</th>    <th>&#x591A;&#x6CDB;&#x57DF;&#x540D;</th>  </tr>  <tr>    <th>DV</th>    <td colspan="2">&#x652F;&#x6301;</td>    <td colspan="2">&#x4E0D;&#x652F;&#x6301;</td>  </tr>  <tr>    <th>OV</th>    <td colspan="4">&#x652F;&#x6301;</td>  </tr>  <tr>    <th>EV</th>    <td colspan="2">&#x652F;&#x6301;</td>    <td colspan="2">&#x4E0D;&#x652F;&#x6301;</td>  </tr>  <tr>    <th>&#x4E3E;&#x4F8B;</th>    <td>www.barretlee.com</td>    <td class="align-left">www.barretlee.comwww.xiaohuzige.comwww.barret.cc</td>    <td>*.barretlee.com</td>    <td class="align-left">*.barretlee.com*.xiaohuzige.com*.barret.cc</td>  </tr></table>

<p><strong>&#x9700;&#x8981;&#x5F3A;&#x8C03;&#x7684;&#x662F;&#xFF0C;&#x4E0D;&#x8BBA;&#x662F; DV&#x3001;OV &#x8FD8;&#x662F; EV &#x8BC1;&#x4E66;&#xFF0C;&#x5176;&#x52A0;&#x5BC6;&#x6548;&#x679C;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF01;</strong> &#x5B83;&#x4EEC;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF1A;</p>
<ul>
<li>DV&#xFF08;Domain Validation&#xFF09;&#xFF0C;&#x9762;&#x5411;&#x4E2A;&#x4F53;&#x7528;&#x6237;&#xFF0C;&#x5B89;&#x5168;&#x4F53;&#x7CFB;&#x76F8;&#x5BF9;&#x8F83;&#x5F31;&#xFF0C;&#x9A8C;&#x8BC1;&#x65B9;&#x5F0F;&#x5C31;&#x662F;&#x5411; whois &#x4FE1;&#x606F;&#x4E2D;&#x7684;&#x90AE;&#x7BB1;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#xFF0C;&#x6309;&#x7167;&#x90AE;&#x4EF6;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x5373;&#x53EF;&#x901A;&#x8FC7;&#xFF1B;</li>
<li>OV&#xFF08;Organization Validation&#xFF09;&#xFF0C;&#x9762;&#x5411;&#x4F01;&#x4E1A;&#x7528;&#x6237;&#xFF0C;&#x8BC1;&#x4E66;&#x5728; DV &#x8BC1;&#x4E66;&#x9A8C;&#x8BC1;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x516C;&#x53F8;&#x7684;&#x6388;&#x6743;&#xFF0C;CA &#x901A;&#x8FC7;&#x62E8;&#x6253;&#x4FE1;&#x606F;&#x5E93;&#x4E2D;&#x516C;&#x53F8;&#x7684;&#x7535;&#x8BDD;&#x6765;&#x786E;&#x8BA4;&#xFF1B;</li>
<li>EV&#xFF08;Extended Validation&#xFF09;&#xFF0C;&#x6253;&#x5F00; Github &#x7684;&#x7F51;&#x9875;&#xFF0C;&#x4F60;&#x4F1A;&#x770B;&#x5230; URL &#x5730;&#x5740;&#x680F;&#x5C55;&#x793A;&#x4E86;&#x6CE8;&#x518C;&#x516C;&#x53F8;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4F1A;&#x8BA9;&#x7528;&#x6237;&#x4EA7;&#x751F;&#x66F4;&#x5927;&#x7684;&#x4FE1;&#x4EFB;&#xFF0C;&#x8FD9;&#x7C7B;&#x8BC1;&#x4E66;&#x7684;&#x7533;&#x8BF7;&#x9664;&#x4E86;&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x786E;&#x8BA4;&#x5916;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x516C;&#x53F8;&#x63D0;&#x4F9B;&#x91D1;&#x878D;&#x673A;&#x6784;&#x7684;&#x5F00;&#x6237;&#x8BB8;&#x53EF;&#x8BC1;&#xFF0C;&#x8981;&#x6C42;&#x5341;&#x5206;&#x4E25;&#x683C;&#x3002;</li>
</ul>
<p>OV &#x548C; EV &#x8BC1;&#x4E66;&#x76F8;&#x5F53;&#x6602;&#x8D35;&#xFF0C;&#x4F7F;&#x7528;&#x65B9;&#x53EF;&#x4EE5;&#x4E3A;&#x8FD9;&#x4E9B;&#x9881;&#x53D1;&#x51FA;&#x6765;&#x7684;&#x8BC1;&#x4E66;&#x4E70;&#x4FDD;&#x9669;&#xFF0C;&#x4E00;&#x65E6; CA &#x63D0;&#x4F9B;&#x7684;&#x8BC1;&#x4E66;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x4E00;&#x5F20;&#x8BC1;&#x4E66;&#x7684;&#x8D54;&#x507F;&#x91D1;&#x53EF;&#x4EE5;&#x8FBE;&#x5230; 100w &#x5200;&#x4EE5;&#x4E0A;&#x3002;</p>
<h3 id="CA_&#x7684;&#x4F5C;&#x7528;">CA &#x7684;&#x4F5C;&#x7528;</h3><p>&#x524D;&#x6587; <a href="http://www.barretlee.com/blog/2015/10/05/how-to-build-a-https-server/">HTTPS&#x8BC1;&#x4E66;&#x751F;&#x6210;&#x539F;&#x7406;&#x548C;&#x90E8;&#x7F72;&#x7EC6;&#x8282;</a> &#x63D0;&#x5230;&#x5982;&#x679C;&#x672C;&#x5730;&#x751F;&#x6210;&#x516C;/&#x79C1;&#x94A5;&#x5BF9;&#x548C;&#x5BF9;&#x5E94;&#x672A;&#x7B7E;&#x8BC1;&#x7684;&#x8BC1;&#x4E66;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7684;&#x8BC1;&#x4E66;&#x6CA1;&#x6709;&#x7B7E;&#x8BC1;&#xFF0C;&#x6216;&#x8005;&#x672A;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x53D7;&#x4FE1;&#x7684; CA &#x7B7E;&#x8BC1;&#xFF0C;&#x4F60;&#x4F1A;&#x770B;&#x5230;&#x4E0B;&#x56FE;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<p><img src="./resource/07562bf05068.jpg" alt="net:ERR_CERT_AUTHORITY_INVALID"/></p>
<p>&#x4E0A;&#x56FE;&#x51FA;&#x73B0;&#x7684;&#x9519;&#x8BEF;&#x662F; <code>net:ERR_CERT_AUTHORITY_INVALID</code>&#xFF0C;&#x6211;&#x4EEC;&#x751F;&#x6210;&#x8BC1;&#x4E66;&#x548C;&#x516C;/&#x79C1;&#x94A5;&#x5BF9;&#x7684;&#x6D41;&#x7A0B;&#x90FD;&#x662F;&#x6B63;&#x786E;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x8BA4;&#x8FD9;&#x5F20;&#x8BC1;&#x4E66;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x793A;&#x8BC1;&#x4E66;&#x6388;&#x6743;&#x4E0D;&#x901A;&#x8FC7;&#xFF1B;&#x5982;&#x679C;&#x901A;&#x8FC7;&#x5176;&#x4ED6;&#x4E0E; Common Name &#x4E0D;&#x540C;&#x7684;&#x57DF;&#x540D;&#x53BB;&#x8BBF;&#x95EE;&#xFF0C;&#x5982;&#x6211;&#x6CE8;&#x518C;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x7684; <code>localhost</code>&#xFF0C;&#x4F46;&#x662F;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x5019;&#x7528;&#x7684; <code>127.0.0.1</code>&#xFF0C;&#x8FD8;&#x4F1A;&#x62A5;&#x51FA;&#x8FD9;&#x6837;&#x7684;&#x9519;&#x8BEF;&#xFF1A;</p>
<p><img src="./resource/f83c51d7df10.jpg" alt="net:ERR_CERT_COMMON_NAME_INVALID"/></p>
<p>&#x9519;&#x8BEF;&#x7801;&#x4E3A; <code>net:ERR_CERT_COMMON_NAME_INVALID</code>&#xFF0C;&#x610F;&#x601D;&#x662F; Common Name &#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x5177;&#x4F53;&#x6821;&#x9A8C;&#x6D41;&#x7A0B;&#x53EF;&#x4EE5;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x7684; DevTools &#x4E2D;&#x770B;&#x5230;&#xFF1A;</p>
<p><img src="./resource/09ab8a679891.jpg" alt="DevTools"/></p>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x51E0;&#x5F20;&#x56FE;&#xFF0C;&#x53EF;&#x4EE5;&#x5927;&#x81F4;&#x4E86;&#x89E3; CA &#x548C;&#x8BC1;&#x4E66;&#x4F1A;&#x505A;&#x54EA;&#x4E9B;&#x4E8B;&#x60C5;&#xFF0C;&#x8BC1;&#x4E66;&#x7531;&#x57DF;&#x540D;&#x3001;&#x516C;&#x53F8;&#x4FE1;&#x606F;&#x3001;&#x5E8F;&#x5217;&#x53F7;&#x548C;&#x7B7E;&#x540D;&#x4FE1;&#x606F;&#x7EC4;&#x6210;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x901A;&#x8FC7; HTTPS &#x8BBF;&#x95EE;&#x9875;&#x9762;&#x65F6;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x4E3B;&#x52A8;&#x9A8C;&#x8BC1;&#x8BC1;&#x4E66;&#x4FE1;&#x606F;&#x662F;&#x5426;&#x5339;&#x914D;&#xFF0C;&#x4E5F;&#x4F1A;&#x9A8C;&#x8BC1;&#x8BC1;&#x4E66;&#x662F;&#x5426;&#x6709;&#x6548;&#x3002;</p>
<p>CA &#x6709;&#x6743;&#x7ED9;&#x6240;&#x6709;&#x7684;&#x57DF;&#x540D;&#x7B7E;&#x53D1;&#x8BC1;&#x4E66;&#xFF0C;&#x5982;&#x5B83;&#x53EF;&#x4EE5;&#x79C1;&#x81EA;&#x7ED9;&#x6211;&#x7684;&#x7F51;&#x7AD9;&#x7B7E;&#x53D1;&#x4E00;&#x5F20; <code>www.barretlee.com</code> &#x7684;&#x8BC1;&#x4E66;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x62FF;&#x7740;&#x65B0;&#x8BC1;&#x4E66;&#x62E6;&#x622A;&#x7F51;&#x9875;&#x6D41;&#x91CF;&#xFF08;&#x5F53;&#x7136;&#xFF0C;&#x524D;&#x63D0;&#x662F;&#x8FD9;&#x4E2A; CA &#x662F;&#x6D4F;&#x89C8;&#x5668;&#x8BA4;&#x8BC1;&#x7684;&#x6743;&#x5A01; CA&#xFF09;&#xFF0C;&#x90A3;&#x6211;&#x7684;&#x7F51;&#x7AD9;&#x53EF;&#x80FD;&#x5C31;&#x5F88;&#x4E0D;&#x5B89;&#x5168;&#x4E86;&#xFF0C;&#x5BF9;&#x62E5;&#x65B0;&#x8BC1;&#x4E66;&#x7684;&#x4EBA;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x7684;&#x7F51;&#x7AD9;&#x7B49;&#x540C;&#x4E8E;&#x5728; HTTP &#x4E0B;&#x8FDB;&#x884C;&#x901A;&#x8BAF;&#x3002;</p>
<h3 id="&#x8BC4;&#x4F30;_CA_&#x4F9B;&#x5E94;&#x5546;">&#x8BC4;&#x4F30; CA &#x4F9B;&#x5E94;&#x5546;</h3><p>CA &#x4F9B;&#x5E94;&#x5546;&#x5F88;&#x591A;&#xFF0C;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x4FA7;&#x91CD;&#x70B9;&#x53EF;&#x80FD;&#x4E5F;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x5DEE;&#x5F02;&#xFF0C;&#x6BD4;&#x5982;&#x5F88;&#x591A; CA &#x90FD;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x8BC1;&#x4E66;&#x540A;&#x9500;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x5BF9;&#x4E8E;&#x5B89;&#x5168;&#x6027;&#x8981;&#x6C42;&#x5F88;&#x9AD8;&#x7684;&#x4F01;&#x4E1A;&#x6765;&#x8BF4;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x80FD;&#x63A5;&#x53D7;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9; CA &#x4F9B;&#x5E94;&#x5546;&#x7684;&#x8BC4;&#x4F30;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x5199;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>
<p><strong>1. &#x5185;&#x7F6E;&#x6839;</strong></p>
<p>&#x6240;&#x8C13;&#x5185;&#x7F6E;&#x6839;&#xFF0C;&#x5C31;&#x662F; CA &#x7684;&#x6839;&#x8BC1;&#x4E66;&#x5185;&#x7F6E;&#x5230;&#x5404;&#x79CD;&#x901A;&#x7528;&#x7684;&#x7CFB;&#x7EDF;/&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#xFF0C;&#x53EA;&#x6709;&#x6839;&#x8BC1;&#x4E66;&#x7684;&#x517C;&#x5BB9;&#x6027;&#x591F;&#x5F3A;&#xFF0C;&#x5B83;&#x6240;&#x80FD;&#x8986;&#x76D6;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x624D;&#x4F1A;&#x8D8A;&#x591A;&#x3002;</p>
<p><strong>2. &#x5B89;&#x5168;&#x4F53;&#x7CFB;</strong></p>
<p>&#x4E24;&#x4E2A;&#x6307;&#x6807;&#x53EF;&#x4EE5;&#x5224;&#x65AD; CA &#x4F9B;&#x5E94;&#x5546;&#x662F;&#x5426;&#x9760;&#x8C31;&#xFF0C;&#x4E00;&#x662F;&#x770B;&#x4EF7;&#x683C;&#xFF0C;&#x4EF7;&#x683C;&#x9AD8;&#x81EA;&#x7136;&#x6709;&#x5B83;&#x7684;&#x7406;&#x7531;&#xFF0C;&#x5FC5;&#x7136;&#x63D0;&#x4F9B;&#x4E86;&#x5168;&#x5957;&#x7684;&#x5B89;&#x5168;&#x4FDD;&#x969C;&#x4F53;&#x7CFB;&#xFF1B;&#x4E8C;&#x662F;&#x770B;&#x9ED1;&#x5386;&#x53F2;&#xFF0C;&#x8BE5; CA &#x4F9B;&#x5E94;&#x5546;&#x6709;&#x6CA1;&#x6709;&#x7206;&#x51FA;&#x8FC7;&#x4EC0;&#x4E48;&#x6F0F;&#x6D1E;&#xFF0C;&#x6BD4;&#x5982;&#x4E4B;&#x524D;&#x7684; DigiNotar&#xFF0C;&#x88AB;&#x4F0A;&#x6717;&#x5165;&#x4FB5;&#xFF0C;&#x7B7E;&#x53D1;&#x4E86; 500 &#x591A;&#x5F20;&#x672A;&#x6388;&#x6743;&#x7684;&#x8BC1;&#x4E66;&#xFF0C;&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x88AB;&#x5404;&#x7CFB;&#x7EDF;/&#x6D4F;&#x89C8;&#x5668;&#x5C06;&#x5176;&#x6839;&#x62C9;&#x5165;&#x9ED1;&#x540D;&#x5355;&#xFF0C;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#x516C;&#x53F8;&#x76F4;&#x63A5;&#x5012;&#x95ED;&#x3002;</p>
<p><strong>3. &#x6838;&#x5FC3;&#x529F;&#x80FD;&#x548C;&#x6269;&#x5C55;&#x529F;&#x80FD;</strong></p>
<p>&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x4ECE;&#x4E1A;&#x52A1;&#x4E0A;&#x8003;&#x8651;&#x4E86;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x89C4;&#x6A21;&#x7684;&#x4F01;&#x4E1A;&#x3001;&#x4E0D;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x5BF9;&#x8BC1;&#x4E66;&#x7684;&#x8981;&#x6C42;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x6BD4;&#x5982;&#x8BC1;&#x4E66;&#x662F;&#x5426;&#x4F1A;&#x8003;&#x8651;&#x65E0; SNI &#x652F;&#x6301;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x95EE;&#x9898;&#xFF0C;&#x662F;&#x5426;&#x652F;&#x6301;&#x5728; reissue &#x7684;&#x65F6;&#x5019;&#x6DFB;&#x52A0;&#x57DF;&#x540D;&#xFF0C;&#x662F;&#x5426;&#x652F;&#x6301; CAA&#xFF0C;&#x662F;&#x5426;&#x652F;&#x6301;&#x77ED;&#x5468;&#x671F;&#x8BC1;&#x4E66;&#x7B49;&#x7B49;&#x3002;</p>
<p><strong>4. &#x4EF7;&#x683C;</strong></p>
<p>&#x4F01;&#x4E1A;&#x5B8C;&#x5168;&#x6CA1;&#x5FC5;&#x8981;&#x8D2D;&#x4E70; Github &#x90A3;&#x6837;&#x7684; EV &#x8BC1;&#x4E66;&#xFF0C;&#x592A;&#x6602;&#x8D35;&#xFF0C;&#x800C;&#x4E14;&#x4E00;&#x822C;&#x7684;&#x4F01;&#x4E1A;&#x4E5F;&#x672A;&#x5FC5;&#x80FD;&#x591F;&#x7533;&#x8BF7;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x8BC1;&#x4E66;&#x3002;&#x4F9B;&#x5E94;&#x5546;&#x5F88;&#x5927;&#xFF0C;&#x4EF7;&#x683C;&#x53EF;&#x4EE5;&#x597D;&#x597D;&#x8BC4;&#x4F30;&#x4E0B;&#xFF0C;&#x4E0D;&#x4E00;&#x5B9A;&#x8981;&#x6700;&#x8D35;&#xFF0C;&#x6700;&#x9002;&#x5408;&#x7684;&#x5C31;&#x884C;&#x3002;</p>
<h3 id="&#x81EA;&#x5EFA;_Root_CA">&#x81EA;&#x5EFA; Root CA</h3><p>OpenSSL &#x662F;&#x4E00;&#x4E2A;&#x514D;&#x8D39;&#x5F00;&#x6E90;&#x7684;&#x5E93;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x6784;&#x5EFA;&#x6570;&#x5B57;&#x8BC1;&#x4E66;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x81EA;&#x5EFA; Root CA&#x3002;</p>
<p>&#x5F88;&#x591A;&#x7F51;&#x7AD9;&#x90FD;&#x5E0C;&#x671B;&#x7528;&#x6237;&#x77E5;&#x9053;&#x4ED6;&#x4EEC;&#x5EFA;&#x7ACB;&#x7684;&#x7F51;&#x7EDC;&#x901A;&#x9053;&#x662F;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x60F3; CA &#x673A;&#x6784;&#x8D2D;&#x4E70;&#x8BC1;&#x4E66;&#x6765;&#x9A8C;&#x8BC1; domain&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x5F88;&#x591A; HTTPS &#x7684;&#x7F51;&#x9875;&#x5730;&#x5740;&#x680F;&#x770B;&#x5230;&#x4E00;&#x628A;&#x5C0F;&#x7EFF;&#x9501;&#x3002;</p>
<p>&#x7136;&#x800C;&#x5728;&#x4E00;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x6CA1;&#x5FC5;&#x8981;&#x53BB; CA &#x673A;&#x6784;&#x8D2D;&#x4E70;&#x8BC1;&#x4E66;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x5185;&#x7F51;&#x7684;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x9A8C;&#x8BC1; HTTPS &#x4E0B;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x6602;&#x8D35;&#x7684;&#x8BC1;&#x4E66;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x81EA;&#x5EFA; Root CA&#xFF0C;&#x7ED9;&#x81EA;&#x5DF1;&#x9881;&#x53D1;&#x8BC1;&#x4E66;&#x5C31;&#x663E;&#x5F97;&#x5F88;&#x6709;&#x4EF7;&#x503C;&#x4E86;&#x3002;</p>
<p>&#x672C;&#x8282;&#x5185;&#x5BB9;&#x8F83;&#x591A;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4EE3;&#x7801;&#x6F14;&#x793A;&#x751F;&#x6210;&#x8BC1;&#x4E66;&#x548C;&#x9A8C;&#x8BC1;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x8DF3;&#x8FC7;&#x770B;&#x4E0B;&#x4E00;&#x8282;&#xFF0C;&#x76F4;&#x63A5;&#x770B; <a href="https://github.com/barretlee/autocreate-ca/README.md" target="_blank" rel="external">&#x8FD9;&#x91CC;</a>&#xFF1A;</p>
<ul>
<li><code>git clone https://github.com/barretlee/autocreate-ca.git</code></li>
<li>&#x4F9D;&#x6B21;&#x6267;&#x884C; <code>install-rootCA.sh</code>&#x3001;<code>install-intermediateCA.sh</code> &#x548C; <code>install-websiteConfig.sh</code></li>
</ul>
<p>&#x9996;&#x5148;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x653E;&#x7F6E;&#x8BC1;&#x4E66;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x6BD4;&#x5982; <code>/root/ca</code> &#x4E0B;&#xFF0C;&#x4E0B;&#x65B9;&#x7684;&#x6D4B;&#x8BD5;&#x4E5F;&#x5728;&#x6539;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8981;&#x66F4;&#x6362;&#x5176;&#x4ED6;&#x76EE;&#x5F55;&#xFF0C;&#x8BB0;&#x5F97;&#x66FF;&#x6362;&#x4E0B;&#x6587;&#x4E2D;&#x7684;&#x76EE;&#x5F55;&#x5730;&#x5740;&#x3002;</p>
<h4 id="&#x521B;&#x5EFA;_root_pair">&#x521B;&#x5EFA; root pair</h4><p>&#x626E;&#x6F14; CA &#x89D2;&#x8272;&#xFF0C;&#x5C31;&#x610F;&#x5473;&#x7740;&#x8981;&#x7BA1;&#x7406;&#x5927;&#x91CF;&#x7684; pair &#x5BF9;&#xFF0C;&#x800C;&#x539F;&#x59CB;&#x7684;&#x4E00;&#x5BF9; pair &#x5BF9;&#x53EB;&#x505A; root pair&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x4E86; root key&#xFF08;<code>ca.key.pen</code>&#xFF09;&#x548C; root certificate&#xFF08;<code>ca.cert.pem</code>&#xFF09;&#x3002;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;root CA &#x4E0D;&#x4F1A;&#x76F4;&#x63A5;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x6216;&#x8005;&#x5BA2;&#x6237;&#x7AEF;&#x7B7E;&#x8BC1;&#xFF0C;&#x5B83;&#x4EEC;&#x4F1A;&#x5148;&#x4E3A;&#x81EA;&#x5DF1;&#x751F;&#x6210;&#x51E0;&#x4E2A;&#x4E2D;&#x95F4; CA&#xFF08;intermediate CAs&#xFF09;&#xFF0C;&#x8FD9;&#x51E0;&#x4E2A;&#x4E2D;&#x95F4; CA &#x4F5C;&#x4E3A; root CA &#x7684;&#x4EE3;&#x8868;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x7B7E;&#x8BC1;&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;&#xFF1A;&#x4E00;&#x5B9A;&#x8981;&#x5728;&#x7EDD;&#x5BF9;&#x5B89;&#x5168;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#x521B;&#x5EFA; root pair&#xFF0C;&#x53EF;&#x4EE5;&#x65AD;&#x5F00;&#x7F51;&#x7EDC;&#x3001;&#x62D4;&#x6389;&#x7F51;&#x7EBF;&#x548C;&#x7F51;&#x5361;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x6D4B;&#x8BD5;&#x73A9;&#x4E00;&#x73A9;&#x5C31;&#x4E0D;&#x7528;&#x8FD9;&#x4E48;&#x8BA4;&#x771F;&#x4E86;&#x3002;</strong></p>
<p>&#x8BBE;&#x5B9A;&#x6587;&#x4EF6;&#x5939;&#x7ED3;&#x6784;&#xFF0C;&#x5E76;&#x4E14;&#x914D;&#x7F6E;&#x597D; openssl &#x8BBE;&#x7F6E;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># mkdir certs crl newcerts private</span></span></div><div><span class="line"><span class="comment"># chmod 700 private</span></span></div><div><span class="line"><span class="comment"># touch index.txt</span></span></div><div><span class="line"><span class="comment"># echo 1000 &gt; serial</span></span></div><div><span class="line"><span class="comment"># wget -O /root/ca/openssl.cnf \ </span></span></div><div><span class="line">    https://raw.githubusercontent.com/barretlee/autocreate-ca/master/cnf/root-ca</span></div></pre></td></tr></table>
<p>&#x521B;&#x5EFA; root key&#xFF0C;&#x5BC6;&#x7801;&#x53EF;&#x4E3A;&#x7A7A;&#xFF0C;&#x8BBE;&#x5B9A;&#x6743;&#x9650;&#x4E3A;&#x53EA;&#x53EF;&#x8BFB;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># openssl genrsa -aes256 -out private/ca.key.pem 4096</span></span></div><div><span class="line"/></div><div><span class="line">Enter pass phrase <span class="keyword">for</span> ca.key.pem: secretpassword</span></div><div><span class="line">Verifying - Enter pass phrase <span class="keyword">for</span> ca.key.pem: secretpassword</span></div><div><span class="line"/></div><div><span class="line"><span class="comment"># chmod 400 private/ca.key.pem</span></span></div></pre></td></tr></table>
<p>&#x521B;&#x5EFA; root cert&#xFF0C;&#x6743;&#x9650;&#x8BBE;&#x7F6E;&#x4E3A;&#x53EF;&#x8BFB;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># openssl req -config openssl.cnf \</span></span></div><div><span class="line">      -key private/ca.key.pem \</span></div><div><span class="line">      -new -x509 -days <span class="number">7300</span> -sha256 -extensions v3_ca \</span></div><div><span class="line">      -out certs/ca.cert.pem</span></div><div><span class="line"/></div><div><span class="line">Enter pass phrase <span class="keyword">for</span> ca.key.pem: secretpassword</span></div><div><span class="line">You are about to be asked to enter information that will be incorporated</span></div><div><span class="line">into your certificate request.</span></div><div><span class="line">-----</span></div><div><span class="line">Country Name (<span class="number">2</span> letter code) [XX]:CN</span></div><div><span class="line">State or Province Name []:Zhejiang</span></div><div><span class="line">Locality Name []:</span></div><div><span class="line">Organization Name []:Barret Lee</span></div><div><span class="line">Organizational Unit Name []:Barret Lee Certificate Authority</span></div><div><span class="line">Common Name []:Barret Lee Root CA</span></div><div><span class="line">Email Address []:</span></div><div><span class="line"/></div><div><span class="line"><span class="comment"># chmod 444 certs/ca.cert.pem</span></span></div></pre></td></tr></table>
<p>&#x9A8C;&#x8BC1;&#x8BC1;&#x4E66;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># openssl x509 -noout -text -in certs/ca.cert.pem</span></span></div></pre></td></tr></table>
<p>&#x6B63;&#x786E;&#x7684;&#x8F93;&#x51FA;&#x5E94;&#x8BE5;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="string">Certificate:</span></span></div><div><span class="line"><span class="label">    Data:</span></span></div><div><span class="line"><span class="label">        Version:</span> <span class="number">3</span> (<span class="number">0x2</span>)</span></div><div><span class="line">        Serial <span class="string">Number:</span></span></div><div><span class="line"><span class="label">            87:</span><span class="string">e8:</span><span class="string">c0:</span><span class="string">a0:</span><span class="number">4</span><span class="string">b:</span><span class="string">e2:</span><span class="number">12</span>:<span class="number">5</span>d</span></div><div><span class="line">        Signature <span class="string">Algorithm:</span> sha256WithRSAEncryption</span></div><div><span class="line"><span class="label">        Issuer:</span> C=CN, ST=Zhejiang, O=Barret Lee, OU=Barret Lee Certificate Authority, CN=Barret Lee Root CA</span></div><div><span class="line">        Validity</span></div><div><span class="line">            Not <span class="string">Before:</span> Apr <span class="number">23</span> <span class="number">05</span>:<span class="number">46</span>:<span class="number">36</span> <span class="number">2016</span> GMT</span></div><div><span class="line">            Not <span class="string">After :</span> Apr <span class="number">18</span> <span class="number">05</span>:<span class="number">46</span>:<span class="number">36</span> <span class="number">2036</span> GMT</span></div><div><span class="line"><span class="label">        Subject:</span> C=CN, ST=Zhejiang, O=Barret Lee, OU=Barret Lee Certificate Authority, CN=Barret Lee Root CA</span></div><div><span class="line">        Subject Public Key <span class="string">Info:</span></span></div><div><span class="line">            Public Key <span class="string">Algorithm:</span> rsaEncryption</span></div><div><span class="line">            RSA Public <span class="string">Key:</span> (<span class="number">4096</span> bit)</span></div><div><span class="line">                Modulus (<span class="number">4096</span> bit):</span></div><div><span class="line">                    <span class="comment">// ...</span></span></div><div><span class="line"><span class="label">                Exponent:</span> <span class="number">65537</span> (<span class="number">0x10001</span>)</span></div><div><span class="line">        X509v3 <span class="string">extensions:</span></span></div><div><span class="line">            X509v3 Subject Key <span class="string">Identifier:</span></span></div><div><span class="line"><span class="label">                E5:</span><span class="number">2</span><span class="string">D:</span><span class="string">B8:</span><span class="number">2</span><span class="string">B:</span><span class="string">DC:</span><span class="number">88</span>:<span class="string">FE:</span><span class="string">CE:</span><span class="string">DA:</span><span class="number">93</span>:<span class="string">D8:</span><span class="number">6</span><span class="string">F:</span><span class="number">2</span><span class="string">E:</span><span class="number">74</span>:<span class="number">04</span>:<span class="string">D2:</span><span class="number">39</span>:<span class="string">E7:</span><span class="string">C8:</span><span class="number">03</span></span></div><div><span class="line">            X509v3 Authority Key <span class="string">Identifier:</span></span></div><div><span class="line"><span class="label">                keyid:</span><span class="string">E5:</span><span class="number">2</span><span class="string">D:</span><span class="string">B8:</span><span class="number">2</span><span class="string">B:</span><span class="string">DC:</span><span class="number">88</span>:<span class="string">FE:</span><span class="string">CE:</span><span class="string">DA:</span><span class="number">93</span>:<span class="string">D8:</span><span class="number">6</span><span class="string">F:</span><span class="number">2</span><span class="string">E:</span><span class="number">74</span>:<span class="number">04</span>:<span class="string">D2:</span><span class="number">39</span>:<span class="string">E7:</span><span class="string">C8:</span><span class="number">03</span></span></div><div><span class="line"/></div><div><span class="line">            X509v3 Basic <span class="string">Constraints:</span> critical</span></div><div><span class="line"><span class="label">                CA:</span>TRUE</span></div><div><span class="line">            X509v3 Key <span class="string">Usage:</span> critical</span></div><div><span class="line">                Digital Signature, Certificate Sign, CRL Sign</span></div><div><span class="line">    Signature <span class="string">Algorithm:</span> sha256WithRSAEncryption</span></div><div><span class="line">        <span class="comment">// ...</span></span></div></pre></td></tr></table>
<p>&#x5305;&#x542B;&#xFF1A;</p>
<ul>
<li>&#x6570;&#x5B57;&#x7B7E;&#x540D;&#xFF08;Signature Algorithm&#xFF09;</li>
<li>&#x6709;&#x6548;&#x65F6;&#x95F4;&#xFF08;Validity&#xFF09;</li>
<li>&#x4E3B;&#x4F53;&#xFF08;Issuer&#xFF09;</li>
<li>&#x516C;&#x94A5;&#xFF08;Public Key&#xFF09;</li>
<li>X509v3 &#x6269;&#x5C55;&#xFF0C;openssl config &#x4E2D;&#x914D;&#x7F6E;&#x4E86; v3_ca&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x751F;&#x6210;&#x6B64;&#x9879;</li>
</ul>
<h4 id="&#x521B;&#x5EFA;_intermediate_pair">&#x521B;&#x5EFA; intermediate pair</h4><p>&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x62E5;&#x6709;&#x4E86; Root Pair&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8BC1;&#x4E66;&#x7684;&#x53D1;&#x653E;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x6839;&#x8BC1;&#x4E66;&#x5F88;&#x5E72;&#x51C0;&#xFF0C;&#x7279;&#x522B;&#x5BB9;&#x6613;&#x88AB;&#x6C61;&#x67D3;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E2D;&#x95F4; pair &#x4F5C;&#x4E3A; root pair &#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x751F;&#x6210;&#x8FC7;&#x7A0B;&#x540C;&#x4E0A;&#xFF0C;&#x53EA;&#x662F;&#x7EC6;&#x8282;&#x7565;&#x5FAE;&#x4E0D;&#x4E00;&#x6837;&#x3002;</p>
<p>&#x751F;&#x6210;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x548C; openssl &#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x914D;&#x7F6E;&#x662F;&#x9488;&#x5BF9; intermediate pair &#x7684;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># mkdir /root/ca/intermediate</span></span></div><div><span class="line"><span class="comment"># cd /root/ca/intermediate</span></span></div><div><span class="line"><span class="comment"># mkdir certs crl csr newcerts private</span></span></div><div><span class="line"><span class="comment"># chmod 700 private</span></span></div><div><span class="line"><span class="comment"># touch index.txt</span></span></div><div><span class="line"><span class="comment"># echo 1000 &gt; serial</span></span></div><div><span class="line"><span class="comment"># echo 1000 &gt; /root/ca/intermediate/crlnumber</span></span></div><div><span class="line"><span class="comment"># wget -O /root/ca/openssl.cnf \</span></span></div><div><span class="line">    https://raw.githubusercontent.com/barretlee/autocreate-ca/master/cnf/intermediate-ca</span></div></pre></td></tr></table>
<p>&#x521B;&#x5EFA; intermediate key&#xFF0C;&#x5BC6;&#x7801;&#x53EF;&#x4E3A;&#x7A7A;&#xFF0C;&#x8BBE;&#x5B9A;&#x6743;&#x9650;&#x4E3A;&#x53EA;&#x53EF;&#x8BFB;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># openssl genrsa -aes256 \</span></span></div><div><span class="line">      -out intermediate/private/intermediate.key.pem <span class="number">4096</span></span></div><div><span class="line"/></div><div><span class="line">Enter pass phrase <span class="keyword">for</span> intermediate.key.pem: secretpassword</span></div><div><span class="line">Verifying - Enter pass phrase <span class="keyword">for</span> intermediate.key.pem: secretpassword</span></div><div><span class="line"/></div><div><span class="line"><span class="comment"># chmod 400 intermediate/private/intermediate.key.pem</span></span></div></pre></td></tr></table>
<p>&#x521B;&#x5EFA; intermediate cert&#xFF0C;&#x8BBE;&#x5B9A;&#x6743;&#x9650;&#x4E3A;&#x53EA;&#x53EF;&#x8BFB;&#xFF0C;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x7279;&#x522B;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x70B9;&#x662F; <strong>Common Name &#x4E0D;&#x8981;&#x4E0E; root pair &#x7684;&#x4E00;&#x6837;</strong> &#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># openssl req -config intermediate/openssl.cnf -new -sha256 \</span></span></div><div><span class="line">      -key intermediate/private/intermediate.key.pem \</span></div><div><span class="line">      -out intermediate/csr/intermediate.csr.pem</span></div><div><span class="line"/></div><div><span class="line">Enter pass phrase <span class="keyword">for</span> intermediate.key.pem: secretpassword</span></div><div><span class="line">You are about to be asked to enter information that will be incorporated</span></div><div><span class="line">into your certificate request.</span></div><div><span class="line">-----</span></div><div><span class="line">Country Name (<span class="number">2</span> letter code) [XX]:CN</span></div><div><span class="line">State or Province Name []:Zhejiang</span></div><div><span class="line">Locality Name []:</span></div><div><span class="line">Organization Name []:Barret Lee</span></div><div><span class="line">Organizational Unit Name []:Barret Lee Certificate Authority</span></div><div><span class="line">Common Name []:Barret Lee Intermediate CA</span></div><div><span class="line">Email Address []:</span></div></pre></td></tr></table>
<p>&#x4F7F;&#x7528; <code>v3_intermediate_ca</code> &#x6269;&#x5C55;&#x7B7E;&#x540D;&#xFF0C;&#x5BC6;&#x7801;&#x53EF;&#x4E3A;&#x7A7A;&#xFF0C;&#x4E2D;&#x95F4; pair &#x7684;&#x6709;&#x6548;&#x65F6;&#x95F4;&#x4E00;&#x5B9A;&#x8981;&#x4E3A; root pair &#x7684;&#x5B50;&#x96C6;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># openssl ca -config openssl.cnf -extensions v3_intermediate_ca \</span></span></div><div><span class="line">      -days <span class="number">3650</span> -notext -md sha256 \</span></div><div><span class="line">      -in intermediate/csr/intermediate.csr.pem \</span></div><div><span class="line">      -out intermediate/certs/intermediate.cert.pem</span></div><div><span class="line"/></div><div><span class="line">Enter pass phrase <span class="keyword">for</span> ca.key.pem: secretpassword</span></div><div><span class="line">Sign the certificate? [y/n]: y</span></div><div><span class="line"/></div><div><span class="line"><span class="comment"># chmod 444 intermediate/certs/intermediate.cert.pem</span></span></div></pre></td></tr></table>
<p>&#x6B64;&#x65F6; root &#x7684; <code>index.txt</code> &#x4E2D;&#x5C06;&#x4F1A;&#x591A;&#x51FA;&#x8FD9;&#x4E48;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">V <span class="number">260421055318</span>Z   <span class="number">1000</span>  unknown .../CN=Barret Lee Intermediate CA</span></div></pre></td></tr></table>
<p>&#x9A8C;&#x8BC1;&#x4E2D;&#x95F4; pair &#x7684;&#x6B63;&#x786E;&#x6027;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># openssl x509 -noout -text \</span></span></div><div><span class="line">      -in intermediate/certs/intermediate.cert.pem</span></div><div><span class="line"><span class="comment"># openssl verify -CAfile certs/ca.cert.pem \</span></span></div><div><span class="line">      intermediate/certs/intermediate.cert.pem</span></div><div><span class="line"/></div><div><span class="line">intermediate.cert.pem: OK</span></div></pre></td></tr></table>
<p>&#x6D4F;&#x89C8;&#x5668;&#x5728;&#x9A8C;&#x8BC1;&#x4E2D;&#x95F4;&#x8BC1;&#x4E66;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x4F1A;&#x53BB;&#x9A8C;&#x8BC1;&#x5B83;&#x7684;&#x4E0A;&#x4E00;&#x7EA7;&#x8BC1;&#x4E66;&#x662F;&#x5426;&#x9760;&#x8C31;&#xFF0C;&#x521B;&#x5EFA;&#x8BC1;&#x4E66;&#x94FE;&#xFF0C;&#x5C06; root cert &#x548C; intermediate cert &#x5408;&#x5E76;&#x5230;&#x4E00;&#x8D77;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x6D4F;&#x89C8;&#x5668;&#x4E00;&#x5E76;&#x9A8C;&#x8BC1;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cat intermediate/certs/intermediate.cert.pem \</span></span></div><div><span class="line">      certs/ca.cert.pem &gt; intermediate/certs/ca-chain.cert.pem</span></div><div><span class="line"><span class="comment"># chmod 444 intermediate/certs/ca-chain.cert.pem</span></span></div></pre></td></tr></table>
<h4 id="&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x5668;/&#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;">&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x5668;/&#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;</h4><p>&#x7EC8;&#x4E8E;&#x5230;&#x4E86;&#x8FD9;&#x4E00;&#x6B65;&#xFF0C;&#x751F;&#x6210;&#x6211;&#x4EEC;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x89E3;&#x91CA;&#x4E86;&#x4E3A;&#x5565;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E2D;&#x95F4;&#x8BC1;&#x4E66;&#x3002;root pair &#x548C; intermediate pair &#x4F7F;&#x7528;&#x7684;&#x90FD;&#x662F; 4096 &#x4F4D;&#x7684;&#x52A0;&#x5BC6;&#x65B9;&#x5F0F;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x670D;&#x52A1;&#x5668;/&#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4E3A;&#x4E00;&#x5E74;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x4F7F;&#x7528; 2048 &#x4F4D;&#x7684;&#x52A0;&#x5BC6;&#x65B9;&#x5F0F;&#x3002;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># openssl genrsa -aes256 \</span></span></div><div><span class="line">      -out intermediate/private/www.barretlee.com.key.pem <span class="number">2048</span></span></div><div><span class="line"><span class="comment"># chmod 400 intermediate/private/www.barretlee.com.key.pem</span></span></div></pre></td></tr></table>
<p>&#x521B;&#x5EFA; <code>www.barretlee.com</code> &#x7684;&#x8BC1;&#x4E66;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># openssl req -config intermediate/openssl.cnf \</span></span></div><div><span class="line">      -key intermediate/private/www.barretlee.com.key.pem \</span></div><div><span class="line">      -new -sha256 -out intermediate/csr/www.barretlee.com.csr.pem</span></div><div><span class="line"/></div><div><span class="line">Enter pass phrase <span class="keyword">for</span> www.barretlee.com.key.pem: secretpassword</span></div><div><span class="line">You are about to be asked to enter information that will be incorporated</span></div><div><span class="line">into your certificate request.</span></div><div><span class="line">-----</span></div><div><span class="line">Country Name (<span class="number">2</span> letter code) [XX]:CN</span></div><div><span class="line">State or Province Name []:Zhejiang</span></div><div><span class="line">Locality Name []:Hangzhou</span></div><div><span class="line">Organization Name []:Barret Lee</span></div><div><span class="line">Organizational Unit Name []:Barret Lee<span class="string">&apos;s Personal Website</span><div><span class="line">Common Name []:www.barretlee.com</span></div><div><span class="line">Email Address []:barret.china@gmail.com</span></div></span></div></pre></td></tr></table>
<p>&#x4F7F;&#x7528; intermediate pair &#x7B7E;&#x8BC1;&#x4E0A;&#x9762;&#x8BC1;&#x4E66;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># cd /root/ca</span></span></div><div><span class="line"><span class="comment"># openssl ca -config intermediate/openssl.cnf \</span></span></div><div><span class="line">      -extensions server_cert -days <span class="number">375</span> -notext -md sha256 \</span></div><div><span class="line">      -in intermediate/csr/www.barretlee.com.csr.pem \</span></div><div><span class="line">      -out intermediate/certs/www.barretlee.com.cert.pem</span></div><div><span class="line"><span class="comment"># chmod 444 intermediate/certs/www.barretlee.com.cert.pem</span></span></div></pre></td></tr></table>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230; <code>/root/ca/intermediate/index.txt</code> &#x4E2D;&#x591A;&#x4E86;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">V <span class="number">170503055941</span>Z   <span class="number">1000</span>  unknown .../emailAddress=barret.china@gmail.com</span></div></pre></td></tr></table>
<p>&#x9A8C;&#x8BC1;&#x8BC1;&#x4E66;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment"># openssl x509 -noout -text \</span></span></div><div><span class="line">      -in intermediate/certs/www.barretlee.com.cert.pem</span></div><div><span class="line"><span class="comment"># openssl verify -CAfile intermediate/certs/ca-chain.cert.pem \</span></span></div><div><span class="line">      intermediate/certs/www.barretlee.com.cert.pem</span></div><div><span class="line"/></div><div><span class="line">www.barretlee.com.cert.pem: OK</span></div></pre></td></tr></table>
<p>&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x62FF;&#x5230;&#x4E86;&#x51E0;&#x4E2A;&#x7528;&#x4E8E;&#x90E8;&#x7F72;&#x7684;&#x6587;&#x4EF6;&#xFF1A;</p>
<ul>
<li><code>ca-chain.cert.pem</code></li>
<li><code>www.barretlee.com.key.pem</code></li>
<li><code>www.barretlee.com.cert.pem</code></li>
</ul>
<h3 id="&#x6DFB;&#x52A0;&#x4FE1;&#x4EFB;_CA_&#x548C;&#x8BC1;&#x4E66;&#x7684;&#x8C03;&#x8BD5;">&#x6DFB;&#x52A0;&#x4FE1;&#x4EFB; CA &#x548C;&#x8BC1;&#x4E66;&#x7684;&#x8C03;&#x8BD5;</h3><p>&#x53CC;&#x51FB; <code>/root/ca/intermediate/certs/ca-chain.cert.pem</code> &#x5C06;&#x8BC1;&#x4E66;&#x5B89;&#x88C5;&#x5230;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x8BA9;&#x672C;&#x673A;&#x4FE1;&#x4EFB;&#x8FD9;&#x4E2A; CA&#xFF0C;&#x5C06;&#x5176;&#x5F53;&#x4F5C;&#x4E00;&#x4E2A;&#x6743;&#x5A01; CA&#xFF0C;&#x5B89;&#x88C5; <code>root pem</code> &#x6216;&#x8005; <code>intermediate chain pem</code> &#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x5177;&#x5907;&#x9A8C;&#x8BC1;&#x80FD;&#x529B;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x6267;&#x884C;&#x8FD9;&#x4E00;&#x6B65;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F9D;&#x7136;&#x4F1A;&#x63D0;&#x793A; <code>net:ERR_CERT_AUTHORITY_INVALID</code>&#x3002;</p>
<p>&#x4E0A;&#x9762;&#x7533;&#x8BF7;&#x6D4B;&#x8BD5;&#x8BC1;&#x4E66;&#x65F6;&#xFF0C;&#x6211;&#x8BBE;&#x7F6E;&#x7684; Common Name &#x4E3A; <code>www.barretlee.com</code>&#xFF0C;&#x7531;&#x4E8E;&#x4E0D;&#x5728;&#x7EBF;&#x4E0A;&#x673A;&#x5668;&#x6D4B;&#x8BD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230; hosts&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span> <span class="tag">www</span><span class="class">.barretlee</span><span class="class">.com</span></span></div></pre></td></tr></table>
<p>&#x6267;&#x884C;&#x4E0B;&#x65B9;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="comment">// https-server.js</span></span></div><div><span class="line"><span class="keyword">var</span> https = <span class="built_in">require</span>(<span class="string">&apos;https&apos;</span>);</span></div><div><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&apos;fs&apos;</span>);</span></div><div><span class="line"/></div><div><span class="line"><span class="keyword">var</span> options = {</span></div><div><span class="line">  key: fs.readFileSync(<span class="string">&apos;/root/ca/intermediate/private/www.barretlee.com.key.pem&apos;</span>),</span></div><div><span class="line">  cert: fs.readFileSync(<span class="string">&apos;/root/ca/intermediate/certs/www.barretlee.com.cert.pem&apos;</span>),</span></div><div><span class="line">  passphrase: <span class="string">&apos;passoword&apos;</span> <span class="comment">// &#x5982;&#x679C;&#x751F;&#x6210;&#x8BC1;&#x4E66;&#x7684;&#x65F6;&#x5019;&#x8BBE;&#x7F6E;&#x4E86;&#x5BC6;&#x7801;&#xFF0C;&#x8BF7;&#x6DFB;&#x52A0;&#x6539;&#x53C2;&#x6570;&#x548C;&#x5BC6;&#x7801;</span></span></div><div><span class="line">};</span></div><div><span class="line"/></div><div><span class="line">https.createServer(options, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>{</span></div><div><span class="line">  res.writeHead(<span class="number">200</span>);</span></div><div><span class="line">  res.end(<span class="string">&apos;hello world&apos;</span>);</span></div><div><span class="line">}).listen(<span class="number">8000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"/>)</span>{</span></div><div><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;Open URL: https://www.barretlee.com:8000&apos;</span>);</span></div><div><span class="line">});</span></div></pre></td></tr></table>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x6548;&#x679C;&#xFF1A;</p>
<p><img src="./resource/e64ebce1942a.jpg" alt="&#x5C0F;&#x7EFF;&#x9501;&#x51FA;&#x6765;&#x4E86;"/></p>
<p>&#x67E5;&#x770B;&#x8BC1;&#x4E66;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF1A;</p>
<p><img src="./resource/06c08ea1263f.jpg" alt="&#x8BC1;&#x4E66;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;"/></p>
<p>&#x56DE;&#x5230;&#x6700;&#x521D;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<blockquote>
<p>&#x7136;&#x800C;&#x5728;&#x4E00;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x6CA1;&#x5FC5;&#x8981;&#x53BB; CA &#x673A;&#x6784;&#x8D2D;&#x4E70;&#x8BC1;&#x4E66;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x5185;&#x7F51;&#x7684;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x9A8C;&#x8BC1; HTTPS &#x4E0B;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x6602;&#x8D35;&#x7684;&#x8BC1;&#x4E66;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x81EA;&#x5EFA; Root CA&#xFF0C;&#x7ED9;&#x81EA;&#x5DF1;&#x9881;&#x53D1;&#x8BC1;&#x4E66;&#x5C31;&#x663E;&#x5F97;&#x5F88;&#x6709;&#x4EF7;&#x503C;&#x4E86;&#x3002;</p>
</blockquote>
<p>&#x4E00;&#x822C;&#x516C;&#x53F8;&#x5185;&#x7F51;&#x7684;&#x7535;&#x8111;&#x90FD;&#x4F1A;&#x5F3A;&#x5236;&#x5B89;&#x88C5;&#x4E00;&#x4E9B;&#x5B89;&#x5168;&#x8BC1;&#x4E66;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x6211;&#x4EEC;&#x81EA;&#x5EFA;&#x81EA;&#x7B7E;&#x540D;&#x7684;&#x8BC1;&#x4E66;&#x5BFC;&#x5165;/&#x5F15;&#x5BFC;&#x5B89;&#x88C5;&#x5230;&#x7528;&#x6237;&#x7684;&#x7535;&#x8111;&#x4E2D;&#x5566;~</p>
<h3 id="&#x65E0;_SNI_&#x652F;&#x6301;&#x95EE;&#x9898;">&#x65E0; SNI &#x652F;&#x6301;&#x95EE;&#x9898;</h3><p>&#x5F88;&#x591A;&#x516C;&#x53F8;&#x7531;&#x4E8E;&#x4E1A;&#x52A1;&#x4F17;&#x591A;&#xFF0C;&#x57DF;&#x540D;&#x4E5F;&#x662F;&#x76F8;&#x5F53;&#x591A;&#x7684;&#xFF0C;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x8FD0;&#x7EF4;&#xFF0C;&#x4F1A;&#x8BA9;&#x5F88;&#x591A;&#x57DF;&#x540D;&#x6307;&#x5411;&#x540C;&#x6837;&#x7684; ip&#xFF0C;&#x7136;&#x540E;&#x7EDF;&#x4E00;&#x5C06;&#x6D41;&#x91CF;/&#x8BF7;&#x6C42;&#x5206;&#x53D1;&#x5230;&#x540E;&#x7AEF;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x4F1A;&#x9762;&#x4E34;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x7531;&#x4E8E; TLS/SSL &#x5728; HTTP &#x5C42;&#x4E4B;&#x4E0B;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x63E1;&#x624B;&#x7684;&#x65F6;&#x5019;&#x8FD8;&#x62FF;&#x4E0D;&#x5230; origin &#x5B57;&#x6BB5;&#xFF0C;&#x6240;&#x4EE5;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x662F;&#x4ECE;&#x54EA;&#x4E2A;&#x57DF;&#x540D;&#x8FC7;&#x6765;&#x7684;&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x5668;&#x8FD9;&#x8FB9;&#x6BCF;&#x4E2A;&#x57DF;&#x540D;&#x90FD;&#x5BF9;&#x5E94;&#x7740;&#x4E00;&#x4E2A;&#x8BC1;&#x4E66;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x4E0D;&#x77E5;&#x9053;&#x8BE5;&#x8FD4;&#x56DE;&#x54EA;&#x4E2A;&#x8BC1;&#x4E66;&#x5566;&#x3002;</p>
<p>SNI &#x5C31;&#x662F;&#x7528;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x5B98;&#x65B9;&#x89E3;&#x91CA;&#x662F;</p>
<blockquote>
<p>SNI&#xFF08;Server Name Indication&#xFF09;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x57DF;&#x540D;&#x548C;&#x8BC1;&#x4E66;&#x7684;SSL/TLS&#x6269;&#x5C55;&#x3002;&#x4E00;&#x53E5;&#x8BDD;&#x7B80;&#x8FF0;&#x5B83;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x5C31;&#x662F;&#xFF0C;&#x5728;&#x8FDE;&#x63A5;&#x5230;&#x670D;&#x52A1;&#x5668;&#x5EFA;&#x7ACB;SSL&#x94FE;&#x63A5;&#x4E4B;&#x524D;&#x5148;&#x53D1;&#x9001;&#x8981;&#x8BBF;&#x95EE;&#x7AD9;&#x70B9;&#x7684;&#x57DF;&#x540D;&#xFF08;Hostname&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x670D;&#x52A1;&#x5668;&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x57DF;&#x540D;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5408;&#x9002;&#x7684;&#x8BC1;&#x4E66;&#x3002;</p>
</blockquote>
<p>&#x7136;&#x540E;&#x6709;&#x5C06;&#x8FD1; 25% &#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x652F;&#x6301;&#x8BE5;&#x5B57;&#x6BB5;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6709;&#x4E24;&#x4E2A;&#x901A;&#x7528;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528; VIP &#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6BCF;&#x4E2A;&#x57DF;&#x540D;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A; VIP&#xFF0C;&#x7136;&#x540E; VIP &#x4E0E;&#x7EDF;&#x4E00;&#x63A5;&#x5165;&#x670D;&#x52A1;&#x5BF9;&#x63A5;&#xFF0C;&#x901A;&#x8FC7; ip &#x6765;&#x5206;&#x53D1;&#x8BC1;&#x4E66;&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD0;&#x7EF4;&#x6210;&#x672C;&#x5F88;&#x9AD8;&#xFF0C;&#x53EF;&#x80FD;&#x4E5F;&#x9700;&#x8981;&#x5927;&#x91CF;&#x7684; VIP &#x670D;&#x52A1;&#x5668;</li>
<li>&#x91C7;&#x7528;&#x591A;&#x6CDB;&#x57DF;&#x540D;&#xFF0C;&#x5C06;&#x591A;&#x4E2A;&#x6CDB;&#x57DF;&#x540D;&#x8BC1;&#x4E66;&#x6253;&#x5305;&#x8FDB;&#x4E00;&#x4E2A;&#x8BC1;&#x4E66;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="https://www.taobao.com" target="_blank" rel="external">&#x6DD8;&#x5B9D;</a> &#x9875;&#x9762;&#x7684;&#x8BC1;&#x4E66;<img src="./resource/ce3620b86621.jpg" alt="taobao cert">&#x5B83;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x6BCF;&#x6B21;&#x6DFB;&#x52A0;&#x57DF;&#x540D;&#x90FD;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x8BC1;&#x4E66;&#x3002;</img></li>
</ul>
<h3 id="&#x51E0;&#x4E2A;&#x7EC6;&#x8282;&#x77E5;&#x8BC6;&#x70B9;">&#x51E0;&#x4E2A;&#x7EC6;&#x8282;&#x77E5;&#x8BC6;&#x70B9;</h3><p><strong>1. &#x8BC1;&#x4E66;&#x9009;&#x62E9;</strong></p>
<p>&#x8BC1;&#x4E66;&#x6709;&#x591A;&#x5F20;&#x52A0;&#x5BC6;&#x65B9;&#x5F0F;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x52A0;&#x5BC6;&#x65B9;&#x5F0F;&#x5BF9; CPU &#x8BA1;&#x7B97;&#x7684;&#x635F;&#x8017;&#x4E0D;&#x540C;&#xFF0C;&#x5B89;&#x5168;&#x7EA7;&#x522B;&#x4E5F;&#x4E0D;&#x540C;&#x3002;TLS &#x5728;&#x8FDB;&#x884C;&#x7B2C;&#x4E00;&#x6B21;&#x63E1;&#x624B;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x5411;&#x670D;&#x52A1;&#x5668;&#x7AEF; <code>say hello</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x4F1A;&#x544A;&#x8BC9;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5B83;&#x652F;&#x6301;&#x54EA;&#x4E9B;&#x7B97;&#x6CD5;&#xFF0C;&#x6B64;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x4EE5;&#x5C06;&#x6700;&#x9002;&#x5408;&#x7684;&#x8BC1;&#x4E66;&#x53D1;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</p>
<p><strong>2. &#x8BC1;&#x4E66;&#x7684;&#x540A;&#x9500;</strong></p>
<p>CA &#x8BC1;&#x4E66;&#x7684;&#x540A;&#x9500;&#x5B58;&#x5728;&#x4E24;&#x79CD;&#x673A;&#x5236;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x5728;&#x7EBF;&#x68C0;&#x67E5;&#xFF0C;client &#x7AEF;&#x5411; CA &#x673A;&#x6784;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x68C0;&#x67E5; server &#x516C;&#x94A5;&#x7684;&#x9760;&#x8C31;&#x6027;&#xFF1B;&#x7B2C;&#x4E8C;&#x79CD;&#x662F; client &#x7AEF;&#x50A8;&#x5B58;&#x4E00;&#x4EFD; CA &#x63D0;&#x4F9B;&#x7684;&#x8BC1;&#x4E66;&#x540A;&#x9500;&#x5217;&#x8868;&#xFF0C;&#x5B9A;&#x671F;&#x66F4;&#x65B0;&#x3002;&#x524D;&#x8005;&#x8981;&#x6C42;&#x67E5;&#x8BE2;&#x670D;&#x52A1;&#x5668;&#x5177;&#x5907;&#x826F;&#x597D;&#x6027;&#x80FD;&#xFF0C;&#x540E;&#x8005;&#x8981;&#x6C42;&#x6BCF;&#x6B21;&#x66F4;&#x65B0;&#x63D0;&#x4F9B;&#x4E0B;&#x6B21;&#x66F4;&#x65B0;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E00;&#x822C;&#x65F6;&#x5DEE;&#x5728;&#x51E0;&#x5929;&#x3002;&#x5B89;&#x5168;&#x6027;&#x8981;&#x6C42;&#x9AD8;&#x7684;&#x7F51;&#x7AD9;&#x5EFA;&#x8BAE;&#x91C7;&#x7528;&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6848;&#x3002;</p>
<p>&#x5927;&#x90E8;&#x5206; CA &#x5E76;&#x4E0D;&#x4F1A;&#x63D0;&#x4F9B;&#x540A;&#x9500;&#x673A;&#x5236;&#xFF08;CRL/OCSP&#xFF09;&#xFF0C;&#x9760;&#x8C31;&#x7684;&#x65B9;&#x6848;&#x662F;&#x4E3A;&#x6839;&#x8BC1;&#x4E66;&#x63D0;&#x4F9B;&#x4E2D;&#x95F4;&#x8BC1;&#x4E66;&#xFF0C;&#x4E00;&#x65E6;&#x4E2D;&#x95F4;&#x8BC1;&#x4E66;&#x7684;&#x79C1;&#x94A5;&#x6CC4;&#x6F0F;&#x6216;&#x8005;&#x8BC1;&#x4E66;&#x8FC7;&#x671F;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x540A;&#x9500;&#x4E2D;&#x95F4;&#x8BC1;&#x4E66;&#x5E76;&#x7ED9;&#x7528;&#x6237;&#x9881;&#x53D1;&#x65B0;&#x7684;&#x8BC1;&#x4E66;&#x3002;&#x4E2D;&#x95F4;&#x8BC1;&#x4E66;&#x7684;&#x7B7E;&#x8BC1;&#x539F;&#x7406;&#x4E8E;&#x4E0A;&#x4E0A;&#x6761;&#x63D0;&#x5230;&#x7684;&#x539F;&#x7406;&#x4E00;&#x6837;&#xFF0C;&#x4E2D;&#x95F4;&#x8BC1;&#x4E66;&#x8FD8;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x4E0B;&#x4E00;&#x7EA7;&#x4E2D;&#x95F4;&#x8BC1;&#x4E66;&#xFF0C;&#x591A;&#x7EA7;&#x8BC1;&#x4E66;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x6839;&#x8BC1;&#x4E66;&#x7684;&#x7BA1;&#x7406;&#x8D1F;&#x62C5;&#x3002;</p>
<p>&#x5F88;&#x591A; CA &#x7684; OCSP Server &#x5728;&#x56FD;&#x5916;&#xFF0C;&#x5728;&#x7EBF;&#x9A8C;&#x8BC1;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x957F;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x8054;&#x7CFB; CA &#x4F9B;&#x5E94;&#x5546;&#x5C06; Server &#x8F6C;&#x79FB;&#x5230;&#x56FD;&#x5185;&#xFF0C;&#x6548;&#x7387;&#x53EF;&#x4EE5;&#x63D0;&#x5347; 10 &#x500D;&#x5DE6;&#x53F3;&#x3002;</p>
<p><strong>3. PKI &#x4F53;&#x7CFB;</strong></p>
<p>&#x6BD4;&#x8F83;&#x4E3B;&#x6D41;&#x7684;&#x4E24;&#x79CD;&#x65B9;&#x6848;&#x662F; HPKP &#x548C; Certificate Transparency&#xFF1A;</p>
<ul>
<li>HPKP &#x5C31;&#x662F;&#x7528;&#x6237;&#x7B2C;&#x4E00;&#x6B21;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x5019;&#x8BB0;&#x4E0B; sign &#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x540E;&#x4E0D;&#x5339;&#x914D;&#x5219;&#x62D2;&#x7EDD;&#x8BBF;&#x95EE;&#xFF0C;&#x8FD9;&#x5B58;&#x5728;&#x5F88;&#x5927;&#x7684;&#x9690;&#x60A3;&#xFF0C;&#x6BD4;&#x5982; Server &#x66F4;&#x65B0;&#x4E86;&#x8BC1;&#x4E66;&#xFF0C;&#x6216;&#x8005;&#x7528;&#x6237;&#x7B2C;&#x4E00;&#x6B21;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x88AB;&#x4EBA;&#x7ED9;&#x9ED1;&#x4E86;</li>
<li>Certificate Transparency &#x610F;&#x601D;&#x5C31;&#x662F;&#x8BA9; CA &#x4F9B;&#x5E94;&#x5546;&#x900F;&#x660E;&#x5316; CA &#x670D;&#x52A1;&#x65E5;&#x5FD7;&#xFF0C;&#x9632;&#x6B62; CA &#x4F9B;&#x5E94;&#x5546;&#x5077;&#x5077;&#x7B7E;&#x8BC1;</li>
</ul>
<h3 id="&#x5C0F;&#x7ED3;">&#x5C0F;&#x7ED3;</h3><p>&#x770B;&#x4E86;&#x4E0D;&#x5C11;&#x6587;&#x7AE0;&#xFF0C;&#x5BF9; CA &#x548C;&#x8BC1;&#x4E66;&#x76F8;&#x5173;&#x7684;&#x77E5;&#x8BC6;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x603B;&#x7ED3;&#xFF0C;&#x53EF;&#x80FD;&#x4E0D;&#x5168;&#x9762;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x8868;&#x8FF0;&#x9519;&#x8BEF;&#x6216;&#x8005;&#x77E5;&#x8BC6;&#x6027;&#x9519;&#x8BEF;&#xFF0C;&#x6B22;&#x8FCE;&#x62CD;&#x7816;&#xFF01;</p>
<h3 id="&#x62D3;&#x5C55;&#x9605;&#x8BFB;">&#x62D3;&#x5C55;&#x9605;&#x8BFB;</h3><ul>
<li><a href="https://jamielinux.com/docs/openssl-certificate-authority/index.html" target="_blank" rel="external">https://jamielinux.com/docs/openssl-certificate-authority/index.html</a></li>
<li><a href="http://www.ert7.com/service/knowledge/3999.html" target="_blank" rel="external">http://www.ert7.com/service/knowledge/3999.html</a></li>
</ul></div>
</div>

</body>
</html>