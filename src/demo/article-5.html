<!DOCTYPE html>
<html>
<head>
  
  <title>Unix/Linux &#x7CFB;&#x7EDF;&#x4E2D;&#x7684; Operation Not Permitted &#x95EE;&#x9898;</title>
  
</head>
<body>

<div id="wrap">
  <h1>Unix/Linux &#x7CFB;&#x7EDF;&#x4E2D;&#x7684; Operation Not Permitted &#x95EE;&#x9898;</h1>
  <div id="content"><p>&#x591A;&#x6B21;&#x5728; Mac &#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#x9047;&#x5230; Operation Not Permitted &#x95EE;&#x9898;&#xFF0C;&#x4E4B;&#x524D;&#x90FD;&#x662F;&#x7565;&#x8FC7;&#xFF0C;&#x4ECA;&#x5929;&#x597D;&#x597D;&#x6478;&#x7D22;&#x4E86;&#x4E00;&#x628A;&#xFF0C;&#x641E;&#x660E;&#x767D;&#x4E86;&#x9053;&#x7406;&#xFF0C;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;&#x3002;</p>
<a id="more"/>
<p>&#x597D;&#x51E0;&#x6B21;&#x6574;&#x7406;&#x79FB;&#x52A8;&#x786C;&#x76D8;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90FD;&#x9047;&#x5230;&#x4E86; <code>Operation Not Permitted</code> &#x95EE;&#x9898;&#xFF0C;&#x6587;&#x4EF6;&#x79FB;&#x52A8;&#x4E0D;&#x4E86;&#xFF0C;&#x4E5F;&#x5220;&#x9664;&#x4E0D;&#x6389;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x9047;&#x5230;&#x6CA1;&#x7406;&#x4F1A;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x662F;&#x6253;&#x5F00;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x5728; Windows &#x4E2D;&#x64CD;&#x4F5C;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x6587;&#x4EF6;&#xFF0C;&#x4ECA;&#x5929;&#x53C8;&#x9047;&#x5230;&#x4E86;&#xFF0C;&#x51B3;&#x5B9A;&#x6D88;&#x706D;&#x5B83;&#x3002;</p>
<h3 id="OS_X_EI_Capitan_&#x7684;_SIP">OS X EI Capitan &#x7684; SIP</h3><p>Apple &#x5728; OS X 10.11 &#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C;&#x4E2D;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;&#x4E86;&#x4E00;&#x9879;&#x7CFB;&#x7EDF;&#x4FDD;&#x62A4;&#x7A0B;&#x5E8F;&#xFF0C;&#x53EB;&#x505A; System Integrity Protection&#xFF0C;&#x4E5F;&#x88AB;&#x5524;&#x4F5C; rootless&#xFF08;&#x5BD3;&#x610F;&#x8BA9; root &#x5F31;&#x4E00;&#x70B9;&#xFF09;&#xFF0C;&#x8BE5;&#x7A0B;&#x5E8F;&#x610F;&#x5728;&#x4FDD;&#x62A4;&#x7535;&#x8111;&#x4E0D;&#x88AB;&#x6076;&#x610F;&#x7A0B;&#x5E8F;&#x653B;&#x51FB;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x8FD9;&#x7FA4;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x5F88;&#x591A;&#x4FDD;&#x62A4;&#x662F;&#x591A;&#x4F59;&#x7684;&#xFF0C;&#x751A;&#x81F3;&#x7ED9;&#x6211;&#x4EEC;&#x5E26;&#x6765;&#x4E86;&#x5F88;&#x591A;&#x9EBB;&#x70E6;&#x3002;</p>
<p>SIP &#x4F1A;&#x9501;&#x5B9A;&#x51E0;&#x4E2A;&#x7CFB;&#x7EDF;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">/System</span></div><div><span class="line">/sbin</span></div><div><span class="line">/usr &#xFF08;/usr/<span class="keyword">local</span> &#x9664;&#x5916;&#xFF09;</span></div></pre></td></tr></table>
<p>&#x5728; SIP &#x7684;&#x4FDD;&#x62A4;&#x4E0B;&#xFF0C;&#x90E8;&#x5206;&#x8F6F;&#x4EF6;&#x3001;&#x529F;&#x80FD;&#x3001;&#x811A;&#x672C;&#x90FD;&#x4F1A;&#x5931;&#x6548;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x6B65;&#x9AA4;&#x5173;&#x95ED; SIP&#xFF1A;</p>
<ul>
<li>&#x91CD;&#x542F;&#x7535;&#x8111;&#xFF0C;&#x6309;&#x4E0B; <code>Command + R</code> &#x76F4;&#x5230;&#x542C;&#x5230;&#x5F00;&#x673A;&#x58F0;&#x97F3;&#xFF0C;&#x6B64;&#x65F6;&#x7535;&#x8111;&#x4F1A;&#x8FDB;&#x5165;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#xFF08;Recovery Mode&#xFF09;</li>
<li>&#x5F53; OSX &#x5DE5;&#x5177;&#x51FA;&#x73B0;&#x5728;&#x5C4F;&#x5E55;&#x4E2D;&#x65F6;&#xFF0C;&#x4E0B;&#x62C9;&#x5DE5;&#x5177;&#xFF08;Utilities&#xFF09;&#x83DC;&#x5355;&#xFF0C;&#x9009;&#x62E9;&#x7EC8;&#x7AEF;&#xFF08;Terminal&#xFF09;</li>
<li>&#x952E;&#x5165; <code>csrutil disable</code>&#xFF0C;&#x56DE;&#x8F66;</li>
<li>&#x7535;&#x8111;&#x91CD;&#x542F;&#x540E;&#xFF0C;SIP &#x5C31;&#x5173;&#x95ED;&#x4E86;</li>
</ul>
<p>&#x6062;&#x590D; SIP &#x7684;&#x65B9;&#x5F0F;&#x540C;&#x4E0A;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x7EC8;&#x7AEF;&#x4E2D;&#x952E;&#x5165; <code>csrutil enable</code>&#x3002;&#x901A;&#x8FC7; <code>csrutil status</code> &#x53EF;&#x4EE5;&#x68C0;&#x6D4B;&#x7CFB;&#x7EDF;&#x5F53;&#x524D; SIP &#x7684;&#x542F;&#x52A8;&#x72B6;&#x6001;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">$ csrutil status</span></div><div><span class="line">System Integrity Protection status: enabled.</span></div></pre></td></tr></table>
<h3 id="Linux_&#x4E0B;&#x7684;_file_flags">Linux &#x4E0B;&#x7684; file flags</h3><p>&#x53EF;&#x80FD;&#x4F60;&#x4E5F;&#x9047;&#x5230;&#x8FC7;&#x5728; Linux &#x4E0B;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x62A5;&#x9519;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">root@ubuntu:/home/barret/work<span class="comment"># rm -f 1.md </span></span></div><div><span class="line">rm: cannot remove &#x2018;<span class="number">1</span>.md&#x2019;: Operation not permitted</span></div></pre></td></tr></table>
<p>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>lsattr</code> &#x547D;&#x4EE4;&#x770B;&#x770B;&#x8BE5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x88AB;&#x6253;&#x4E86; flags&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">root@ubuntu:/home/barret/work<span class="comment"># lsattr 1.md</span></span></div><div><span class="line">----i-------<span class="operator">-e</span>-- ./<span class="number">1</span>.md</span></div></pre></td></tr></table>
<p>&#x5982;&#x679C;&#x6587;&#x4EF6;&#x4E0A;&#x5B58;&#x5728; <code>i</code> &#x6807;&#x8BB0;&#xFF0C;&#x90A3;&#x80AF;&#x5B9A;&#x662F;&#x5220;&#x4E0D;&#x6389;&#x7684;&#xFF0C;&#x540C;&#x6837;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E5F;&#x4E0D;&#x80FD;&#x88AB;&#x7F16;&#x8F91;&#x3002;&#x53EF;&#x4EE5;&#x8FDB;&#x5165; root &#x6A21;&#x5F0F;&#xFF0C;&#x53BB;&#x9664;&#x8FD9;&#x4E2A;&#x6807;&#x8BB0;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">root@ubuntu:/home/barret/work<span class="comment"># chattr -i 1.md</span></span></div></pre></td></tr></table>
<p>&#x7ED9;&#x4FDD;&#x62A4;&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x6807;&#x8BB0;&#x7684;&#x65B9;&#x5F0F;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line">root@ubuntu:/home/barret/work<span class="comment"># chattr +i 1.md</span></span></div></pre></td></tr></table>
<p>&#x4E5F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x3002;</p>
<h3 id="&#x5C0F;&#x7ED3;">&#x5C0F;&#x7ED3;</h3><p>&#x6587;&#x672C;&#x7B97;&#x662F;&#x4E00;&#x4E2A;&#x7ECF;&#x9A8C;&#x6027;&#x7684;&#x5C0F;&#x79D1;&#x666E;&#xFF0C;&#x5E0C;&#x671B;&#x5BF9;&#x4F60;&#x6709;&#x5E2E;&#x52A9;&#x3002;</p></div>
</div>

</body>
</html>