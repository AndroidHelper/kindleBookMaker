<!DOCTYPE html>
<html>
<head>
  
  <title>&#x5143;&#x7D20;&#x9009;&#x62E9;&#x5668; - Mini Query</title>
  
</head>
<body>

<div id="wrap">
  <h1>&#x5143;&#x7D20;&#x9009;&#x62E9;&#x5668; - Mini Query</h1>
  <div id="content"><p>&#x5BE5;&#x5BE5;&#x51E0;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5143;&#x7D20;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x517C;&#x5BB9;&#x4F4E;&#x7248;&#x672C; IE&#x3002;</p>
<a id="more"/>
<p>&#x81EA; IE8 &#x5F00;&#x59CB;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x652F;&#x6301; querySelector &#x548C; querySelectorAll &#x8FD9;&#x4E24;&#x4E2A;&#x5341;&#x5206;&#x6709;&#x7528;&#x7684;&#x9009;&#x62E9;&#x5668;&#x51FD;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x8003;&#x8651;&#x4F4E;&#x7248;&#x672C;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5B83;&#x4EEC;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x57FA;&#x672C;&#x6EE1;&#x8DB3;&#x65E5;&#x5E38;&#x9700;&#x6C42;&#x4E86;&#x3002;&#x800C;&#x5728;&#x517C;&#x5BB9;&#x4F4E;&#x7248;&#x672C;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x4E00;&#x4E9B; hack &#x624B;&#x6BB5;&#x3002;</p>
<p>&#x539F;&#x7406;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF1A;&#x901A;&#x8FC7; CSS Rule &#x7ED9;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x6807;&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x7279;&#x6B8A;&#x5C5E;&#x6027;&#xFF0C;&#x7136;&#x540E;&#x904D;&#x5386;&#x6240;&#x6709;&#x5143;&#x7D20;&#x627E;&#x5230;&#x5177;&#x5907;&#x7279;&#x6B8A;&#x5C5E;&#x6027;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x627E;&#x5230;&#x4E4B;&#x540E;&#xFF0C;&#x79FB;&#x9664;&#x8FD9;&#x4E9B;&#x7279;&#x6B8A;&#x5C5E;&#x6027;&#x3002;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="keyword">var</span> firstStyleSheet = <span class="built_in">document</span>.styleSheets[<span class="number">0</span>] || <span class="built_in">document</span>.createStyleSheet();</span></div><div><span class="line">  firstStyleSheet.addRule(query, <span class="string">&apos;Barret:Lee&apos;</span>);</span></div><div><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="built_in">document</span>.all.length; i &lt; len; i++) {</span></div><div><span class="line">  <span class="keyword">var</span> item = <span class="built_in">document</span>.all[i];</span></div><div><span class="line">  item.currentStyle.Barret &amp;&amp; res.push(item);</span></div><div><span class="line">}</span></div><div><span class="line">firstStyleSheet.removeRule(<span class="number">0</span>);</span></div></pre></td></tr></table>
<p>&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x8981;&#x83B7;&#x53D6; <code>.box .item a.pink</code> &#x5143;&#x7D20;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x8FD9;&#x4E48;&#x505A;&#x7684;,</p>
<ul>
<li>&#x7ED9;&#x6240;&#x6709;&#x7684; <code>.box .item a.pink</code> &#x5143;&#x7D20;&#x6DFB;&#x52A0; <code>{ Barret: Lee; }</code> &#x8FD9;&#x4E2A; CSS &#x7684;&#x6837;&#x5F0F;</li>
<li>&#x904D;&#x5386;&#x6240;&#x6709;&#x5143;&#x7D20;&#x627E;&#x5230;&#x5305;&#x542B; Barret &#x8FD9;&#x4E2A; CSS &#x5C5E;&#x6027;&#x7684;&#x5143;&#x7D20;</li>
<li>&#x79FB;&#x9664;&#x5C5E;&#x6027;</li>
</ul>
<p>IE8 &#x6709;&#x4E9B;&#x8C03;&#x76AE;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x590D;&#x70B9;&#x5C0F;&#x95EE;&#x9898;&#xFF0C;&#x6E90;&#x7801;&#x5730;&#x5740;&#xFF1A;</p>
<ul>
<li>git clone <a href="https://github.com/barretlee/MiniQuery" target="_blank" rel="external">https://github.com/barretlee/MiniQuery</a></li>
<li><code>npm install mini-query</code></li>
</ul>
<p>&#x4EE3;&#x7801;&#x9884;&#x89C8;&#xFF1A;</p>
<table><tr><td class="code"><pre><div><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params">query</span>) </span>{</span></div><div><span class="line">  <span class="keyword">var</span> res = [];</span></div><div><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.querySelectorAll) {</span></div><div><span class="line">    res = <span class="built_in">document</span>.querySelectorAll(query);</span></div><div><span class="line">  } <span class="keyword">else</span> {</span></div><div><span class="line">    <span class="keyword">var</span> firstStyleSheet = <span class="built_in">document</span>.styleSheets[<span class="number">0</span>] || <span class="built_in">document</span>.createStyleSheet();</span></div><div><span class="line">    query = query.split(<span class="string">&apos;,&apos;</span>);</span></div><div><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = query.length; i &lt; len; i++) {</span></div><div><span class="line">      firstStyleSheet.addRule(query[i], <span class="string">&apos;Barret:Lee&apos;</span>);</span></div><div><span class="line">    }</span></div><div><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="built_in">document</span>.all.length; i &lt; len; i++) {</span></div><div><span class="line">      <span class="keyword">var</span> item = <span class="built_in">document</span>.all[i];</span></div><div><span class="line">      item.currentStyle.Barret &amp;&amp; res.push(item);</span></div><div><span class="line">    }</span></div><div><span class="line">    firstStyleSheet.removeRule(<span class="number">0</span>);</span></div><div><span class="line">  }</span></div><div><span class="line">  <span class="keyword">if</span>(res.item) { <span class="comment">/* Fuck IE8 */</span></span></div><div><span class="line">    <span class="keyword">var</span> ret = [];</span></div><div><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = res.length; i &lt; len; i++){</span></div><div><span class="line">      ret.push(res.item(i));</span></div><div><span class="line">    }</span></div><div><span class="line">    res = ret;</span></div><div><span class="line">  }</span></div><div><span class="line">  <span class="keyword">return</span> res;</span></div><div><span class="line">};</span></div></pre></td></tr></table></div>
</div>

</body>
</html>